- commits:
    - subject: AMI debug
      hash: c75995a0dcc8f8e3f26c8a678a2aff4e0b2568e9
      body: ''
      footer:
        Changelog-entry: AMI debug
        changelog-entry: AMI debug
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev12
  date: 2021-10-21T15:13:13.330Z
- commits:
    - subject: Fix inaccessible file while preloading AMI
      hash: d441ff46a1d56d370069dac9d07442f8742b2aaa
      body: |
        This should fix a bug in AMI preloading where the preloaded image
        is inacessible by balena CLI.
      footer:
        Changelog-entry: Fix inaccessible file while preloading AMI
        changelog-entry: Fix inaccessible file while preloading AMI
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev11
  date: 2021-10-21T05:01:45.996Z
- commits:
    - subject: Fix race condition while preloading AMIs
      hash: ebcf6f08bcf3b5fe8efaedd3f11eb5c326232c83
      body: |
        This should fix a race condition preloading AMIs while multiple builds
        are running in parallel (e.g. dev and prod variants during deploy).
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Fix race condition while preloading AMIs
        changelog-entry: Fix race condition while preloading AMIs
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev10
  date: 2021-10-20T05:29:10.239Z
- commits:
    - subject: 'meta-balena-generic: update local.conf.sample'
      hash: c0535bacdf298377f30e25e153b93d9dff2f034b
      body: |
        Update the sample configuration file to use OS_DEVELOPMENT instead of
        DEVELOPMENT_IMAGE.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: 'meta-balena-generic: update local.conf.sample'
        changelog-entry: 'meta-balena-generic: update local.conf.sample'
        Signed-off-by: Mark Corbin <mark@balena.io>
        signed-off-by: Mark Corbin <mark@balena.io>
      author: Mark Corbin
      nested: []
  version: 2.85.3+rev9
  date: 2021-10-18T13:42:19.578Z
- commits:
    - subject: Support a wider range of RAID controllers
      hash: 611057f78bdaef4587f866584602b407e09aaa1a
      body: |
        These are not all the available RAID controllers, got the list from
        https://wiki.debian.org/LinuxRaidForAdmins
      footer:
        Changelog-entry: Support a wider range of RAID controllers
        changelog-entry: Support a wider range of RAID controllers
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev8
  date: 2021-10-06T15:39:06.671Z
- commits:
    - subject: Fix SSH injection during AMI build
      hash: c1759f441c44a5ef9017a5f38e4a86c17057d91c
      body: |
        This fixes injection of SSH key into AMIs
      footer:
        Changelog-entry: Fix SSH injection during AMI build
        changelog-entry: Fix SSH injection during AMI build
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev7
  date: 2021-10-01T15:06:44.439Z
- commits:
    - subject: Fix preloading for AMI builds
      hash: 903eb97c5178dd66c98957c0614a8e77cfa347b5
      body: |
        This updates balena-cli in automation scripts to fix preloading of AMIs
      footer:
        Changelog-entry: Fix preloading for AMI builds
        changelog-entry: Fix preloading for AMI builds
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev6
  date: 2021-10-01T10:31:47.499Z
- commits:
    - subject: Fix architecture detection for AMI builds
      hash: 4d281916e85aec9ce0d28d4a7d9c0649711080e8
      body: |
        This adds a missing argument for architecture detecion in AMI builds
      footer:
        Changelog-entry: Fix architecture detection for AMI builds
        changelog-entry: Fix architecture detection for AMI builds
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev5
  date: 2021-10-01T04:25:18.118Z
- commits:
    - subject: Add support for AMI builds
      hash: e1a28d45f27f5c02cb1da5aae277c8a0a9f1f1c1
      body: |
        This brings support for building AMIs.
      footer:
        Changelog-entry: Add support for AMI builds
        changelog-entry: Add support for AMI builds
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev4
  date: 2021-09-30T18:57:44.938Z
- commits:
    - subject: Rename generic-amd64 to genericx86-64-ext
      hash: 63557bef9a828c0aef7d4196875bb2f77aed2bdc
      body: >
        We are moving the genericx86-64-ext device type from balena-intel

        repository to balena-generic and need to keep the slug for the time
        being.
      footer:
        Changelog-entry: Rename generic-amd64 to genericx86-64-ext
        changelog-entry: Rename generic-amd64 to genericx86-64-ext
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.85.3+rev3
  date: 2021-09-29T12:51:18.782Z
- commits:
    - subject: Remove generic-armv7ahf logo
      hash: a100a6e228dbf6b1beda75c8cc362d3163953024
      body: >
        This device-type was removed in
        3ef7f46a0499689264f771aaa923cace5a375337,

        so remove the logo too.


        This device was never released to production, so there is no hostapp

        created for it.
      footer:
        Changelog-entry: Remove generic-armv7ahf logo
        changelog-entry: Remove generic-armv7ahf logo
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.3+rev2
  date: 2021-09-22T14:46:45.106Z
- commits:
    - subject: Update meta-balena from v2.83.11 to v2.85.3
      hash: 3fb363cb2af59729620795dbce6487624dd1133d
      body: |
        Update meta-balena from 2.83.11 to 2.85.3
      footer:
        Changelog-entry: Update meta-balena from v2.83.11 to v2.85.3
        changelog-entry: Update meta-balena from v2.83.11 to v2.85.3
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested:
        - commits:
            - subject: 'balena-os-sysctl: Reduce the console default loglevel'
              hash: 626b0e25cbd13ca65a74bbfe09ff9e0828b380bb
              body: >
                This avoids the kernel printing debug messages on the consoles.
                It is

                also the default in other upstream distros like Ubuntu.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-config-vars: Re-run os-sshkeys if config.json is modified'
              hash: 67b7aa5b58a26178411b598415e296fea5628a00
              body: >
                This change allows to pick-up changes to "os.sshKeys" in
                config.json

                without having to reboot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'systemd: Use drop-in to modify unit files instead of sed'
              hash: b07a78453243d12db59524836c3cc62d355a6f2d
              body: >
                Performing unit modifications in drop-in files is better
                practise.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.3
          date: 2021-09-21T11:28:51.115Z
        - commits:
            - subject: Update balena-engine to v19.03.29
              hash: a2ed32e139489afd89e59e0e63a7c676969de3d8
              body: |
                Update balena-engine from 19.03.26 to 19.03.29
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.29
                changelog-entry: Update balena-engine to v19.03.29
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: 'pkg/storagemigration: use graphdriver/copy.DirCopy'
                      hash: ffbb608492405488bff5e31ea62c0249fb416106
                      body: |
                        instead of our own implementation
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.29
                  date: 2021-09-14T15:38:47.823Z
                - commits:
                    - subject: Prune Jenkinsfile
                      hash: ea14e503181bbb248a4bed1b86a227d9c214cbfb
                      body: >
                        we are not using it for our CI, and it confuses jenkins
                        set up on the

                        balena-os org
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.28
                  date: 2021-09-14T14:54:48.288Z
                - commits:
                    - subject: Backport platform-detection fixes from containerd
                      hash: 9f71253561b1cd2f262ec0d6e81c5fbd09a7a0a1
                      body: >
                        See https://github.com/containerd/containerd/pull/4530

                        and `git log
                        ad25c1a9c34361e4071f508b9a91946b05fce165^..2055e12953bb538228d8d9fe627fa545d7cf82be
                        ./platforms/`

                        in the containerd repo
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.27
                  date: 2021-09-01T18:43:57.993Z
          version: meta-balena-2.85.2
          date: 2021-09-17T20:43:01.200Z
        - commits:
            - subject: Fix typo in OS_DEVELOPMENT distro feature
              hash: 7992a7900506eaf0279f93c747dea1520875c817
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'tests: Remove OS variants'
              hash: 5545c4e15831e16497a737307da69d38f947aa51
              body: >
                The OS is now a single image that can switch between development
                and

                production modes at runtime.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.1
          date: 2021-09-17T14:02:11.331Z
        - commits:
            - subject: Replace image variants with development mode
              hash: 0c7c629dcde13de9188f05f6f551f34837ad84ff
              body: >
                The dual image variants are replaced with a runtime
                configuration switch

                for development mode.


                Fixes #2226

                Fixes #1058

                Relates to: balena-io/balena-io#2247
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Replace image variants with development mode
                changelog-entry: Replace image variants with development mode
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-supervisor: Update balena-supervisor to v12.10.10'
              hash: 1aa662a4ab11f32c71d13352eea7e86c0784df33
              body: |
                Update balena-supervisor from 12.10.3 to 12.10.10
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: >-
                        api-keys: Remove os variant parameter for authentication
                        check
                      hash: 9e0cbe04c6d1c533c3e66183eca1d3abfb8c381d
                      body: >
                        The current code authenticates unmanaged production
                        devices which makes

                        no sense. Unmanaged devices do not need to authenticate
                        with the API.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: >-
                        os-release: Use developmentMode to ascertain OS variant
                        in new releases
                      hash: 1abd10a12947f05ae328496e98fcbcdc6a834ce1
                      body: >
                        Newer BalenaOS releases have replaced OS variants for a
                        developmentMode

                        configuration setting. This commit uses this variable to
                        set the OS

                        variant in the absence of `VARIANT_ID` from the
                        os-release file.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: 'config: Add developmentMode to schema'
                      hash: 4ad7a3ae917c888f267463fd3d5b839439cf40e6
                      body: >
                        Add a `developmentMode` configuration variable to the
                        schema. Do not expose

                        this on the device target state until local key-based
                        authentication is

                        sorted.
                      footer:
                        Relates-to: >-
                          https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        relates-to: >-
                          https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                  version: balena-supervisor-12.10.10
                  date: 2021-09-07T13:47:51.206Z
                - commits:
                    - subject: Update URL to balena-proxy-config source code
                      hash: 2bcc3aeb56cce11b21d411ee55492109ebaf259f
                      body: >
                        Use a GitHub permalink that includes the commit in

                        case the file changes and the reference becomes
                        out-of-date.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.9
                  date: 2021-09-02T12:25:21.696Z
                - commits:
                    - subject: Bump path-parse from 1.0.6 to 1.0.7
                      hash: 2e38356bf4f5157483017ea2e6670514cbca49c1
                      body: >
                        Bumps
                        [path-parse](https://github.com/jbgutierrez/path-parse)
                        from 1.0.6 to 1.0.7.

                        - [Release
                        notes](https://github.com/jbgutierrez/path-parse/releases)

                        -
                        [Commits](https://github.com/jbgutierrez/path-parse/commits/v1.0.7)


                        ---

                        updated-dependencies:

                        - dependency-name: path-parse
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: 'dependabot[bot] <support@github.com>'
                        signed-off-by: 'dependabot[bot] <support@github.com>'
                      author: 'dependabot[bot]'
                      nested: []
                  version: balena-supervisor-12.10.8
                  date: 2021-09-01T20:50:51.601Z
                - commits:
                    - subject: Bump tar from 4.4.13 to 4.4.19
                      hash: b7cb494602fbd050bb9e31b5e8293a080349562c
                      body: >
                        Bumps [tar](https://github.com/npm/node-tar) from 4.4.13
                        to 4.4.19.

                        - [Release
                        notes](https://github.com/npm/node-tar/releases)

                        -
                        [Changelog](https://github.com/npm/node-tar/blob/main/CHANGELOG.md)

                        -
                        [Commits](https://github.com/npm/node-tar/compare/v4.4.13...v4.4.19)


                        ---

                        updated-dependencies:

                        - dependency-name: tar
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: 'dependabot[bot] <support@github.com>'
                        signed-off-by: 'dependabot[bot] <support@github.com>'
                      author: 'dependabot[bot]'
                      nested: []
                  version: balena-supervisor-12.10.7
                  date: 2021-09-01T20:40:01.473Z
                - commits:
                    - subject: Remove "variable list" heading in configuration doc
                      hash: 5205e8ce07375a7bf9ca18f0a28bd73c275acd96
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.6
                  date: 2021-09-01T18:06:51.646Z
                - commits:
                    - subject: Clean up configurations.md
                      hash: af51ef8eb54af96cf00657576908f020ac401488
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.5
                  date: 2021-08-31T22:51:45.166Z
                - commits:
                    - subject: Include issues with downgrading versions in README
                      hash: 1280ac365618eb4106e9c20dd4e738a22958d0b7
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.4
                  date: 2021-08-31T18:51:02.478Z
            - subject: 'u-boot: Introduce a compile time osdev-image feature'
              hash: b839f2d91ca1844d96f4d3165ae5e2923489d11d
              body: >
                At runtime we can now enable development features that were
                previously

                configured using the development-image feature. That feature
                also

                configured U-Boot for OS development.


                Now we have two distinct functionalities:


                * A runtime development configuration variable that configures
                the

                device to facilitate application development

                * A build time osdev-image feature that configures the OS for
                BSP and OS

                development


                This allows us to merge the current production/development
                images into

                a single image.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'os-release: Remove image variants information'
              hash: 4c4dac7e0cc078a9d10c0bb77e4bf702af5f0e55
              body: |
                There are no more image variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Replace DEVELOPMENT_IMAGE and image variants with OS_DEVELOPMENT
              hash: fc369799cdab0012cc9c75aaa4a2e54bb6b2656a
              body: >
                The images now can be configured for application development
                mode at runtime.

                This commit introduces a built time option to configure them for
                BSP or

                other OS development like board bringup.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'images: Remove debug-tweaks settings.'
              hash: cb1618b6d17a6c1118ea65d7485bb1bea907e18e
              body: >
                The ssh development configurations are now applied at runtime.
                The only

                feature that has been left out is the postinst logging.
                Customers that

                need to develop the OS can configure this themselves.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'openssh: Enable runtime development configuration'
              hash: 8bac93b3ed8c54452ea858ffc33a2e46a2e3358d
              body: >
                When a device is configured in development mode, allow password

                authentication and empty passwords, as well as root logins.


                In production mode, disable password authentication to allow
                only

                SSH access.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-info: Rename from resin-info'
              hash: 7f2abbf9a26c376125d18bd625f639f26d578d12
              body: |
                Replace references to resin for balena.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena: Expose engine socket on development mode'
              hash: 858f3b983e7842a155f0a34d60b6a8f488bacb2e
              body: >
                When configured in development mode expose the engine socket.
                This is

                currently used for local mode development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image-balena: Allow passwordless root logins'
              hash: 71aeea3652bf095544b1083023aa5d4e97448597
              body: >
                Even without debug-tweaks, allow passwordless root logins. For
                production

                builds there is no console available so this setting does not
                change current

                functionality.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image_balena: Remove "balena" hostname from development images'
              hash: 7b57e9caf4fa82bd05091becfe1b750bca033342
              body: >
                There is no reason not to have development images use the uuid
                as

                hostname in the same way production images do.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'systemd: Runtime enablement of serial console'
              hash: d80092c6ecf67720175b72ccbcbf7da6c907d48f
              body: >
                Adapt the systemd getty services to enable for images configured
                for

                development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                development-features: Add service for development features
                runtime management
              hash: 5227ba18d0fe81fabae2b33b3f0cd9f690f85973
              body: >
                This service will adjust the filesystem with development
                features based on

                the `developmentMode` setting on `config.json`.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.0
          date: 2021-09-15T09:05:37.493Z
        - commits:
            - subject: 'hostapp-update-hooks: Fix blacklisted extlinux.conf file path'
              hash: 096024808224aea2100e2a2a1f95ef75e23493ef
              body: >
                The extlinux.conf file path in meta-balena is currently

                incorrect, let's update it's boot partition path so that

                BalenaHUP won't need to transfer the isolcpus setting to

                the new OS anymore. This is necessary only when updating from
                older

                OS versions in which the supervisor adds the isolcpus

                setting to the boot partition extlinux.conf file.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.84.7
          date: 2021-09-13T12:01:41.123Z
        - commits:
            - subject: 'balena-persistent-logs: add comment and update logging'
              hash: c05ff73df2341ceb182f7bc1acf00d4719a13afd
              body: |
                Add a comment and update the logging.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'balena-persistent-logs: add comment and update logging'
                changelog-entry: 'balena-persistent-logs: add comment and update logging'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'meta-balena: rename resin-persistent-logs'
              hash: 2fa5bead70a700eff06ea8d140974ea3925a0c7d
              body: |
                Rename 'resin-persistent-logs' to 'balena-persistent-logs' and
                update all references.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'meta-balena: rename resin-persistent-logs'
                changelog-entry: 'meta-balena: rename resin-persistent-logs'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.84.6
          date: 2021-09-11T12:14:21.164Z
        - commits:
            - subject: 'tests: led: require led property from device type'
              hash: 0439de2a706cabf2b6b82736fa2959313c653c56
              body: >
                Only run LED test when device type contract specifies support
                for it
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.5
          date: 2021-09-10T13:29:21.135Z
        - commits:
            - subject: 'tests: Remove reboots from redsocks test cases'
              hash: 53f58ca927075730d9bb9ebe0a98e525f3d8d793
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.4
          date: 2021-09-09T20:26:17.261Z
        - commits:
            - subject: >-
                tests: Prevent failure when journalctl has no logs for some
                boots
              hash: cab2b5aa7b97afad9006ed3c3701e49a9d76d366
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.3
          date: 2021-09-09T11:41:46.786Z
        - commits:
            - subject: >-
                contributing-device-support.md: Updates to board support
                instructions
              hash: 56d47e97ab2becea9d7ecd96de397d937f539954
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.84.2
          date: 2021-09-08T13:26:00.933Z
        - commits:
            - subject: 'tests: s/BALENA_MACHINE_NAME/BALENA_ARCH'
              hash: 16015b5ba1570777478a585aaea37ed354dacc82
              body: >
                Replace Dockerfile image %%BALENA_MACHINE_NAME%% var with

                %%BALENA_ARCH%% for better compatibility


                Device types lacking matching tags in the balenalib Docker Hub
                account

                will fail tests when a matching image is not found. Switch to

                BALENA_ARCH instead, to maintain compatibility.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.1
          date: 2021-09-05T16:47:16.988Z
        - commits:
            - subject: 'balena-engine: Enable storage migration'
              hash: 7d69faa7889e6725a4397511a6178ed2c745acbd
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
            - subject: Update balena-engine to v19.03.26
              hash: a7538159d2015a61dc3effc5e3fe390056d0265b
              body: |
                Update balena-engine from 19.03.24 to 19.03.26
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.26
                changelog-entry: Update balena-engine to v19.03.26
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: 'storagemigration: capture failcleanup logs in logfile'
                      hash: 4f7f543eff08766bc584024afdb57760dfb52130
                      body: >
                        reorder the defer statements in the migrate function to
                        only teardown

                        the logger after the failcleanup function ran. otherwise
                        errors logged

                        there won't show up in the logfile
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.26
                  date: 2021-08-31T11:26:15.276Z
                - commits:
                    - subject: 'storagemigration: move logic to package'
                      hash: 001835bf61172fdcfdb0416e000852ff05683c71
                      body: >
                        This brings all migration logic into a single call into
                        the

                        storagemigration package, which should make future
                        maintenance easier

                        and fixes the cleanup logic bug, where the old aufs root
                        would never be

                        cleaned up.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.25
                  date: 2021-08-20T15:55:35.623Z
          version: meta-balena-2.84.0
          date: 2021-09-03T11:43:21.582Z
        - commits:
            - subject: 'tests: remove healthcheck test race condition'
              hash: 4f728271e767e8998f73870c2de23c03a5d12823
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.22
          date: 2021-09-02T15:34:27.322Z
        - commits:
            - subject: 'tests: Register teardown only when DUT is reachable'
              hash: 2f01b040236f6565195550cdfde91464687f5cf2
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.21
          date: 2021-09-01T22:56:06.844Z
        - commits:
            - subject: 'tests: Use new Archiver implementation & helpers'
              hash: 883ec60492a16b443cb6ce04c12cda8bbf4d028d
              body: |
                The changes are as follows:
                1. Delete custom logic in tests for archiving logs
                2. Make use of the new archiveLogs helper
                3. Make use of the new implementation of the Archiver module
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.83.20
          date: 2021-09-01T19:37:21.036Z
        - commits:
            - subject: 'tests: List boots when collecting journal logs in hup suite'
              hash: 8e7b6a157b033db57ff2df75a63b5e054957803f
              body: |
                Some OS versions before HUP do not support the '-b all' flag
                to journalctl. This commit reverts to the original behaviour
                that lists the boots and requests the logs for each boot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.19
          date: 2021-09-01T13:25:10.726Z
        - commits:
            - subject: 'balena-supervisor: Update balena-supervisor to v12.10.3'
              hash: 782c9e24b91b5beb1c30c7643015c6fe7f53d2d2
              body: |
                Update balena-supervisor from 12.9.3 to 12.10.3
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested:
                - commits:
                    - subject: >-
                        Skip restarting services if they are part of conf
                        targets
                      hash: 669866b4c296529bd5392a0c48cd389a6d1f5770
                      body: >
                        Some recent changes to the OS allowed some services to
                        restart

                        automatically when the associated config files are
                        changed.


                        In these cases we want to avoid restarting the same
                        services

                        manually from the supervisor.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.3
                  date: 2021-08-24T18:07:03.099Z
                - commits:
                    - subject: Removed fire emoji prefix for firewall logs.
                      hash: 30c728fae23ee66f3c1612736bb0c300f0b0762d
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: peakyDicers
                      nested: []
                  version: balena-supervisor-12.10.2
                  date: 2021-08-02T21:27:42.412Z
                - commits:
                    - subject: Fix regression with local mode push
                      hash: 6f5f3bc2f3aea1bf5e5772533be80c3bfbb4e3a9
                      body: >
                        PR #1749 introduced a bug when pushing local target
                        state. An update to

                        the [image name
                        normalization](https://github.com/balena-os/balena-supervisor/blob/f1bd4b8d9bcef29e326cbf97eaddd837c2704d19/src/lib/docker-utils.ts#L81)

                        failed to consider the local image name format. This
                        results in mangling

                        of image names in the database, i.e. the image
                        `ubuntu:latest` is stored

                        as `/ubuntu:latest`. This causes an exception to be
                        returned by the

                        dockerode `getImage('/ubuntu:latest').inspect()` call.


                        This sends the supervisor into a crash loop and is shown
                        on the supervisor

                        journal logs as


                        ```

                        getaddrinfo ENOTFOUND images
                            at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:64:26)
                        ```


                        Unfortunately if this happens on a user device, since
                        the mangled image

                        name is already on the database, the easiest way to fix
                        is to remove the

                        supervisor database and let the supervisor recreate it.
                        Deleting the

                        database should be side effect free.
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.1
                  date: 2021-08-02T15:55:28.001Z
                - commits:
                    - subject: >-
                        Remove comparison based on image, release, and service
                        ids
                      hash: b67f94802dd8c2e890121f6ca82eda8dff2c051c
                      body: >
                        Preparing for the new v3 target state, where the
                        supervisor will make environment

                        dependent ids optional and rely on using general UUIDs
                        and user known identifiers

                        for comparison. This PR moves forward in that direction
                        by removing some of those

                        comparisons for v2 target state.


                        - imageId to be replaced with imageName

                        - serviceId to be replace by serviceName

                        - releaseId to be replaced by commit (future
                        release_uuid)


                        This is a backwards compatible change, meaning it
                        doesn't completely get rid of

                        these identifiers (which are still being used by
                        supervisor API and for state

                        patch), but will not depend on those identifiers for
                        calculating steps to target state.
                      footer:
                        Change-type: minor
                        change-type: minor
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.0
                  date: 2021-07-28T14:00:22.581Z
                - commits:
                    - subject: Use tags to track supervised images in docker
                      hash: f1bd4b8d9bcef29e326cbf97eaddd837c2704d19
                      body: >
                        The image manager module now uses tags instead of docker
                        IDs as the main

                        way to identify docker images on the engine. That is, if
                        the target

                        state image has a name `imageName:tag@digest`, the
                        supervisor will always use

                        the given `imageName` and `tag` (which may be empty) to
                        tag the image on

                        the engine after fetching. This PR also adds checkups to
                        ensure

                        consistency is maintained between the database and the
                        engine.


                        Using tags allows to simplify query and removal
                        operations, since now

                        removing the image now means removing tags matching the
                        image name.


                        Before this change the supervisor relied only on
                        information in the

                        supervisor database, and used that to remove images by
                        docker ID. However, the docker

                        id is not a reliable identifier, since images retain the
                        same id between

                        releases or between services in the same release.


                        List of squashed commits

                        - Remove custom type NormalizedImageInfo

                        - Remove dependency on docker-toolbelt

                        - Use tags to traack supervised images in docker

                        - Ensure tag removal occurs in sequence

                        - Only save database image after download confirmed
                      footer:
                        Relates-to: '#1616 #1579'
                        relates-to: '#1616 #1579'
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.6
                  date: 2021-07-26T13:58:29.275Z
                - commits:
                    - subject: Log the delta URL that will be downloaded on update
                      hash: c05c5803f08ddd31eeddb2000cc5f162fb916003
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Closes: '#1755'
                        closes: '#1755'
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.5
                  date: 2021-07-22T15:08:58.505Z
                - commits:
                    - subject: Fix db-helper module for tests
                      hash: 357d1baf6188d89b8552fd9068dbea9ac50aa008
                      body: >
                        The previous module was using `rewire` to get the knex
                        instance from the

                        db module but that was leading to issues when running
                        tests using `test:fast`.

                        This provides a fix for the test module that just
                        removes the destroy

                        call entirely (it turns out it is not necessary).
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.4
                  date: 2021-07-08T18:48:09.003Z
          version: meta-balena-2.83.18
          date: 2021-08-31T20:45:45.918Z
        - commits:
            - subject: Assign a fixed name to the balena-healthcheck container
              hash: c80932d323ae99a3b3a3a9120a29b5c67196fc44
              body: |
                This avoids confusion when new containers with random names
                appear in the runtime history of the engine.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.17
          date: 2021-08-31T16:04:47.503Z
        - commits:
            - subject: 'kernel-modules-headers: Copy module.lds'
              hash: 9fca34e0f4faffc0fa049e9341e7392f365bea31
              body: >
                Since kernel v5.10 this file is generated when using
                modules_prepare. As

                the kernel-modules-headers contains pre-built target binaries,
                we also

                need to include this file in the package.


                This is not a problem when using kernel-source as a
                modules_prepare is

                always required.
              footer:
                Fixes: '#2289'
                fixes: '#2289'
                Relates-to: '#1822'
                relates-to: '#1822'
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.16
          date: 2021-08-31T11:22:51.142Z
        - commits:
            - subject: 'kernel-balena: remove global blacklist of btrfs'
              hash: b9d6df84a1acd45df80da8a90ea4ca4dc2940bcf
              body: >
                The kernel-balena class contains a global blacklist of btrfs
                that

                disables this filesystem for all device types, regardless of
                them

                explicitly enabling it.


                Remove this config to allow devices to enable this filesystem.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.15
          date: 2021-08-30T15:47:20.658Z
        - commits:
            - subject: 'tests: remove reboot requirement from NTP server test'
              hash: 47deb00854eefc2c8ca4103d934713d26077a7c8
              body: |
                We no longer require a reboot when changing the NTP server
                configuration in config.json. Changes to 'config-json' will
                automatically trigger the 'balena-ntp-config' service which will
                update the NTP sources.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'tests: remove reboot requirement from NTP server test'
                changelog-entry: 'tests: remove reboot requirement from NTP server test'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'recipes-connectivity: fix auto-update when config.json changes'
              hash: 85df30628278eeb0d55e731319391d3cf98df9a8
              body: >
                Since adding the 'config-json' systemd target the
                'balena-ntp-config'

                and 'prepare-openvpn' services have stopped running
                automatically

                when config.json is updated. This is fixed by adding

                'RemainAfterExit=yes' to both service files.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'recipes-connectivity: fix auto-update when config.json changes'
                changelog-entry: 'recipes-connectivity: fix auto-update when config.json changes'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.14
          date: 2021-08-26T17:54:07.640Z
        - commits:
            - subject: 'networkmanager: fix hostname race condition'
              hash: 3f2486bc91994d360086694df9f01bb4b6777284
              body: >
                Fix a race condition that can occur when setting the hostname at

                boot by disabling NetworkManager's ability to modify the
                hostname.

                The static and transient system hostnames are now managed
                exclusively

                by the 'balena-hostname' service.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: '#2244'
                connects-to: '#2244'
                Changelog-entry: 'networkmanager: fix hostname race condition'
                changelog-entry: 'networkmanager: fix hostname race condition'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.13
          date: 2021-08-26T12:17:00.556Z
        - commits:
            - subject: 'tests: remove reboot requirement from hostname test'
              hash: 34687ca76515d57a77ba12c0fd44632518181392
              body: >
                We no longer require reboots when changing hostname in
                config.json.

                The contents of '/etc/hostname' and the avahi mDNS broadcast
                hostname

                are updated automatically without requiring a reboot.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'tests: remove reboot requirement from hostname test'
                changelog-entry: 'tests: remove reboot requirement from hostname test'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'hostname: update system hostname when config.json changes'
              hash: f7b3d37502f03ca65d3352a8a8cc3b8a5d612ff4
              body: >
                Automatically update the system hostname when config.json
                changes.


                Changes to 'config.json' will trigger the 'balena-hostname'
                service

                to update the static and transient hostnames and the 'avahi'

                service to ensure that any hostname changes are broadcast via
                mDNS.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'hostname: update system hostname when config.json changes'
                changelog-entry: 'hostname: update system hostname when config.json changes'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.12
          date: 2021-08-25T23:51:01.153Z
  version: 2.85.3+rev1
  date: 2021-09-21T19:01:21.201Z
- commits:
    - subject: Match image rootfs size from genericx86-64-ext
      hash: 0c3c0163321853db9ea77484051b7bb696bb704f
      body: |
        Use the same image size as genericx86-64-ext for compatiblity. This
        allows the generic-amd64 image to replace genericx86-64-ext when they
        reach feature parity, without causing hostapp-update problems later.
      footer:
        Changelog-entry: Match image rootfs size from genericx86-64-ext
        changelog-entry: Match image rootfs size from genericx86-64-ext
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
  version: 2.83.11+rev3
  date: 2021-09-01T17:07:10.374Z
- commits:
    - subject: Enable AUFS module for all devices
      hash: a6aa6fa1f29419c1a22d4c3bfd34f91e99e76e5a
      body: |
        We still need AUFS for builders when building images for devices with
        BALENA_STORAGE="aufs", so include the module by default.
      footer:
        Changelog-entry: Enable AUFS module for all devices
        changelog-entry: Enable AUFS module for all devices
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
    - subject: Update linux-yocto to version 5.10.43
      hash: 4e46a2448e2490a7af84efc9edc602aaf9c10849
      body: |
        This recipe comes from poky hardknott-3.3.2, copied from balena-intel
        commit 8e5faed.
      footer:
        Changelog-entry: Update linux-yocto to version 5.10.43
        changelog-entry: Update linux-yocto to version 5.10.43
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
    - subject: 'linux-yocto: generic-aarch64: copy defconfig from debian'
      hash: 704e1f468785ae8aaf29bd66fa3c4697a5c8faf7
      body: |
        Install a config for generic-aarch64, in kind with the generic-amd64
        config copied from the genericx86-64-ext config. However, copy the
        config directly from the Debian Bullseye linux-config-5.10 (5.10.46-4)
        package, as we don't already have a config in use for this architecture.

        Also save this as a defconfig.
      footer:
        Changelog-entry: 'linux-yocto: generic-aarch64: copy defconfig from debian'
        changelog-entry: 'linux-yocto: generic-aarch64: copy defconfig from debian'
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
    - subject: 'linux-yocto: generic-amd64: copy defconfig from generic86-64-ext'
      hash: 3afd7e4a002e270f72cf8d9319e7d62c418f0350
      body: |
        The linux-yocto package includes no defconfig, and specifying
        KCONFIG_MODE="--alldefconfig" results in a config containing only
        architecture defaults, with meta-balena overrides and machine specific
        overrides. This results in a lack of hardware support unless it's
        explicitly enabled.

        Copy the full defconfig from balena-intel, used for the
        genericx86-64-ext device type, itself based on an Ubuntu config.
      footer:
        Changelog-entry: 'linux-yocto: generic-amd64: copy defconfig from generic86-64-ext'
        changelog-entry: 'linux-yocto: generic-amd64: copy defconfig from generic86-64-ext'
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
  version: 2.83.11+rev2
  date: 2021-08-27T17:12:04.585Z
- commits:
    - subject: Enable firmware compression
      hash: 4cc28bd8f72a07c2c23ddfd0c1445adeee10c677
      body: |
        Compress firmware to save space and disk writes
      footer:
        Changelog-entry: Enable firmware compression
        changelog-entry: Enable firmware compression
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
    - subject: Update meta-balena from v2.83.10 to v2.83.11
      hash: 81bd0720a78b7278c177c6e1f6f063dc18056767
      body: |
        Update meta-balena from 2.83.10 to 2.83.11
      footer:
        Changelog-entry: Update meta-balena from v2.83.10 to v2.83.11
        changelog-entry: Update meta-balena from v2.83.10 to v2.83.11
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested:
        - commits:
            - subject: 'linux-firmware: Use wildcards when selecting files to package'
              hash: 16598bcffda7206d9a2ab9d96860cecf7de62756
              body: >
                Firmware files can be compressed with an xz extension or not, so
                use

                wildcards to cover both cases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'linux-firmware: Add firmware compression support'
              hash: 2ee6d2e652772d28c25df94aa400e7ccd9f207de
              body: >
                This commit adds a FIRMWARE_COMPRESSION distro configuration
                that

                performs the compression of linux-firmware files. Only kernel
                versions

                above 5.3 support loading compressed firmware.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                kernel-balena: Support firmware compression from kernel version
                5.3
              hash: c8faa130b88f11af86619d69a115be96dfbc894a
              body: >
                Kernel version 5.3 supports loading compressed firmware files
                saving

                storage space.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.11
          date: 2021-08-24T14:52:41.041Z
  version: 2.83.11+rev1
  date: 2021-08-25T18:21:10.767Z
- commits:
    - subject: Update meta-balena from v2.74.0 to v2.83.10
      hash: edfa5b71cf867a9809cb47bb49ac6a2eb62105a5
      body: |
        Update meta-balena from 2.74.0 to 2.83.10
      footer:
        Changelog-entry: Update meta-balena from v2.74.0 to v2.83.10
        changelog-entry: Update meta-balena from v2.74.0 to v2.83.10
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested:
        - commits:
            - subject: >-
                kernel-balena: Add function to conditionally configure based on
                version
              hash: 9787d2879d2f372c19f336c7e08bd0e6fee16ae7
              body: >
                Some kernel configuration are only applicable from specific
                kernel

                versions. This commit adds a function that allows to add a
                specific

                configuration set only from a given kernel version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-balena: Split function to get kernel version from source'
              hash: c349f647db328558f026f1b914bc0246dc33bda5
              body: >
                This allows to re-use this functionality. Note that the
                `KERNEL_VERSION`

                variable is only available after the kernel has been built as it
                relies

                on get_kernelversion_headers() poky function and utsrelease.h
                being

                generated. This function parses the Makefile so only needs the
                source.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-resin: Add as symlink to kernel-balena'
              hash: 129128574dbf38c46c0cc7121cdf6fd0f38ef64b
              body: |
                This avoids introducing a breaking change.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-balena: Replace and deprecate kernel-resin'
              hash: 8c0d2ce52d42e72a939d248784d67dc2413c0443
              body: >
                New device types should use kernel-balena instead of
                kernel-resin.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.10
          date: 2021-08-18T19:03:21.519Z
        - commits:
            - subject: 'recipes-connectivity: improve NTP dispatcher script'
              hash: d060bfa3581f6920fa2e353abaf82d2913d60e67
              body: >
                Change the NetworkManager NTP dispatcher script to update the

                on/offline status of the NTP sources on 'connectivity-change'
                events

                instead of 'up/down' events.


                Currently 'chronyc onoffline' is run for 'up/down' events on any

                network interface. It makes more sense to run it for

                'connectivity-change' events as we are really interested in
                whether

                the internet is there or not rather than whether an interface is

                up or down.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'recipes-connectivity: improve NTP dispatcher script'
                changelog-entry: 'recipes-connectivity: improve NTP dispatcher script'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.9
          date: 2021-08-17T10:37:50.423Z
        - commits:
            - subject: Update balena-engine to v19.03.24
              hash: 1d3d0d0c8ef60710eaa67d68b5f606eb22e6fd28
              body: |
                Update balena-engine from 19.03.23 to 19.03.24
              footer:
                Changelog-entry: Update balena-engine to v19.03.24
                changelog-entry: Update balena-engine to v19.03.24
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: prevent slice oob access in concatReadSeekCloser
                      hash: 1e7045ac957db17fe9838602c9339c0b5ae5c282
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Martin Rauscher
                      nested: []
                  version: balena-engine-19.03.24
                  date: 2021-08-12T08:30:08.031Z
          version: meta-balena-2.83.8
          date: 2021-08-17T07:29:06.381Z
        - commits:
            - subject: 'grub: don''t package or install bindir utils'
              hash: f1835282ecd3b0f9dfc52410d8f1628653e2c1b2
              body: >
                Remove ${bindir} from FILES_grub-common, ensuring grub utilities
                aren't

                installed to /usr/bin, in addition to a previous similar commit
                that

                removed sbin utils. This frees approximately 5.5M.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.7
          date: 2021-08-14T14:48:17.382Z
        - commits:
            - subject: 'balena-os-sysctl: disable user namespacing by default'
              hash: 31c3ae8ad5c7ad45e450349b6972524da120e96c
              body: >
                Most major distributions now ship kernels with user namespacing
                enabled

                in the kernel config. Some distributions, such as Arch and
                Ubuntu,

                default to the upstream behavior of allowing unprivileged user

                namespacing, regardless of potential attack surfaces exposed in
                the

                kernel.


                Other distributions, such as Debian, are slightly more
                conservative,

                disabling the feature at runtime behind a sysctl tunable. Debian

                maintains its own patch to add the
                kernel.unprivileged_userns_clone

                tunable.


                The Debian patch was rejected by upstream over fears of
                application

                developers not using this feature due to it being generally
                unavailable

                in systems, as well as fears of bugs going undiscovered.


                RHEL uses a newer tunable introduced upstream to set the max
                number of

                user namespaces to zero, which accomplishes the same thing, but
                without

                an out of tree patch.


                Disable user namespacing at runtime using the same method as
                RHEL, in

                the same manner as the hardened kernels and distributions have
                chosen.


                https://lwn.net/Articles/673597/

                https://lists.debian.org/debian-kernel/2020/03/msg00237.html
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'common: kernel-resin: enable user namespacing'
              hash: 04d9561760b449024a5b411bd366ded2351cd5cd
              body: >
                Enable CONFIG_USER_NS, a kernel feature used for user
                namespacing, and

                required for docker-in-docker.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.6
          date: 2021-08-13T16:30:49.145Z
        - commits:
            - subject: >-
                resin-u-boot.bbclass: Make console silencing change more
                resilient
              hash: 6f173d763828d63f70582219aa19333b1e599a57
              body: >
                There is at least a case in a board where the puts function in
                u-boot's

                common/console.c is #ifdef'ed and defined twice. Let's
                accomodate for

                such cases by correctly looping through more than one function

                definition if present.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.83.5
          date: 2021-08-13T08:16:50.739Z
        - commits:
            - subject: 'balena-os: pin linux-firmware to 20210511 from hardknott'
              hash: e7a72c3e82587ffd2388656de71340afdddc9156
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'linux-firmware: upgrade 20190815 -> 20210511'
              hash: 497fa316fec3ef99a14872208abb85f7e932922d
              body: |
                Add recipe from poky hardknott, revision 74dbb08
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.4
          date: 2021-08-11T16:09:10.911Z
        - commits:
            - subject: 'supervisor: Consolidate supervisor container removal'
              hash: f533be0ee1d6f42801f29426929e5f8b18035b9b
              body: |
                Avoid removing supervisor containers in 3 different places
                and consolidate the steps into start-balena-supervisor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.3
          date: 2021-08-05T18:58:49.620Z
        - commits:
            - subject: 'tests: Fix insecure registry error'
              hash: 647d683dbfd0461706e75291c5396752fdc1b2ce
              body: >
                introduced when images including
                8227a61f6bef6d93cc6a5acd0ef93a2012079964

                made it to production.

                We can now use a runtime drop-in unit placed under /run/systemd/
                to

                configure the balena-host service, which doesn't require us to
                remount

                the rootfs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.83.2
          date: 2021-08-05T13:55:32.372Z
        - commits:
            - subject: 'linux-firmware: package i915 generations separately'
              hash: e741dcf6f520765c3345c1e64cfc3f31f5b6a604
              body: >
                Package Intel graphics firmware generations separately, allowing
                GPU

                firmware to be installed for specific SoCs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.1
          date: 2021-07-31T15:24:38.031Z
        - commits:
            - subject: Add support for rootfs on MD RAID1
              hash: bc1cb47f177b0d04a17c26b00b4ca99cf4638c33
              body: |
                This commit does two things:
                - Build in necessary kernel modules
                - Add the mdadm userspace utility to rootfs and initrd
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.83.0
          date: 2021-07-29T14:10:41.247Z
        - commits:
            - subject: >-
                tests: Symlink /dev/null instead of copying bash to break
                services
              hash: eea7514c705b43482dd3656d0c34bb2414c267ee
              body: >
                Triggered by a failue in the VPN test - the bash binary is
                bigger than

                the openvpn binary and on devices with limitted rootfs space the
                copying

                is not possible. Symlinking /dev/null will break the services as
                well.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.82.13
          date: 2021-07-29T07:32:26.577Z
        - commits:
            - subject: 'common: grub: don''t install sbin utils'
              hash: e3bf23c7977c6c0dce9eb0a49172526a7e447522
              body: >
                These utilities aren't used on device. Don't install them to
                save space.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.82.12
          date: 2021-07-24T01:06:12.763Z
        - commits:
            - subject: 'tests: Remove journalctl line limit from hup suite'
              hash: 5ce248f0d1b37c6500cdd93c639a89027f1fc7f4
              body: |
                Having the lines limited to 500 meant we were missing
                a lot of logs.

                We also don't need to list boots and can use the 'all'
                arguement to see all logs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'tests: Enable rollback tests in hup suite'
              hash: 9d1e892324718f2533cae1cf5e09018526d13b20
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'tests: Update smoke test conditions'
              hash: 64df0c010841b0f00d8025b79ae0f23a6fccdf29
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'tests: Add rollback tests to HUP suite'
              hash: 87e89fcf7b07180f3221602afc7a5b4dd8cd9e48
              body: >
                Adding rollback-health check & rollback-altboot check to the HUP
                suite
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'rollback-altboot: Fix minor typo in log message'
              hash: 1b3405ebf116420de032ccbdac39638a420c4a88
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.82.11
          date: 2021-07-21T20:25:31.196Z
        - commits:
            - subject: 'tests: Remove reboot requirement from dnsmasq tests'
              hash: 1ea1985f7ebc56908d018c98211fd52f6fd6701c
              body: >
                We no longer require reboots when changing dnsServers in
                config.json

                and the service should restart on it's own.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.82.10
          date: 2021-07-20T20:09:41.348Z
        - commits:
            - subject: 'patch: Make OS test suite compatible with current helpers'
              hash: 5a7dd196686836bd35a95f3f2c5dadf138b2590f
              body: ''
              footer:
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.82.9
          date: 2021-07-16T22:29:01.729Z
        - commits:
            - subject: >-
                kernel-devsrc: Add upstream recipe from hardknott-3.3.1 for
                dunfell
              hash: f1d45613abfb3f0178868a2d09c22368e2f705fb
              body: >
                In recent kernels (i.e. 5.10.31 for Raspberry Pi) the

                arch/arm/kernel/module.lds file got moved. See

                https://github.com/torvalds/linux/commit/

                596b0474d3d9b1242eab713f84d8873f9887d980 for details.


                Hence we use in meta-balena-dunfell the upstream kernel-devsrc
                from the

                hardknott-3.3.1 Poky release which handles this module.lds move.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.82.8
          date: 2021-07-16T13:13:11.566Z
        - commits:
            - subject: Update balena-engine to v19.03.23
              hash: 5d882694102ce32706de08df3ab435bb0cec176c
              body: >
                Update balena-engine from 19.03.18 to 19.03.23


                Which brings more resilient layer download (allows proper
                resuming after

                network failures).
              footer:
                Signed-off-by: Leandro Motta Barros <leandro@balena.io>
                signed-off-by: Leandro Motta Barros <leandro@balena.io>
                Changelog-entry: Update balena-engine to v19.03.23
                changelog-entry: Update balena-engine to v19.03.23
                Change-type: patch
                change-type: patch
              author: Leandro Motta Barros
              nested:
                - commits:
                    - subject: Make layer download resuming more resilient
                      hash: 582487f832c59c2f734a780ab0492833f29002c9
                      body: >
                        This commit changes the way we retry layer downloads
                        after failures with

                        the goal of making it more resilient, especially for
                        cases involving

                        large layers and unreliable network connections.


                        These are the changes:


                        * Make sure we also retry after failures in
                        `v2LayerDescriptor.reset()`.
                          This method creates a new HTTP request to resume a failed download,
                          and therefore depends on a working network to succeed.
                        * Wait exponentially longer times between retries
                        (instead of retrying
                          immediately as before). This shall increase of success in case of
                          network issues that take longer to get resolved.
                        * Increase the number of retries to 10.

                        * Reset retry count whenever we successfully download
                        anything at all.
                          The idea is that we want to give up downloading only after a long
                          continuous period of failures. Combined with the exponential back-off
                          strategy and increased number of retries described above, a layer pull
                          will fail only after about 17 minutes.
                        * Add a bit more logging to help with troubleshooting.
                      footer:
                        Change-type: minor
                        change-type: minor
                        Signed-off-by: Leandro Motta Barros <leandro@balena.io>
                        signed-off-by: Leandro Motta Barros <leandro@balena.io>
                      author: Leandro Motta Barros
                      nested: []
                  version: balena-engine-19.03.23
                  date: 2021-07-12T13:21:18.693Z
                - commits:
                    - subject: Drop CODEOWNERS
                      hash: e70e1a9fe622563719993626e834c85efc17905c
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.22
                  date: 2021-06-30T16:13:18.248Z
                - commits:
                    - subject: Lock destination layers while delta is being processed
                      hash: 0ad4281e11e4d3ef263010787aecd244c0ce333d
                      body: >
                        During fingerpinting of the source image the destination
                        layers are not

                        exepmt from being released (e.g. when `balena image rm
                        <iid>`) is run

                        simultaneously.

                        Similarly when processing the destination layers to
                        generate deltas we

                        only hold one reference at a time, leaving the
                        subsequent layers

                        vulnerable to the same issues.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.21
                  date: 2021-06-25T12:17:21.340Z
                - commits:
                    - subject: >-
                        pkg/storagemigration: poperly handle errors during state
                        creation
                      hash: b8170db554ac1d1abb3adcfe1f6265701e9147c5
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.20
                  date: 2021-06-17T12:37:04.408Z
                - commits:
                    - subject: >-
                        pkg/storagemigration: allow writing logs to separate
                        file
                      hash: 77536d3866ac706f049a02d2eed44a7df1cb779c
                      body: >
                        This can be used to keep a record of failed migrations.

                        Only runs if BALENA_MIGRATE_OVERLAY_LOGFILE is set to a
                        path on disk.

                        The log file will be deleted if there are no errors.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                    - subject: 'storagemigration: defer commit to next start'
                      hash: bd1628e67136b78ca7e7c83c5569666207d28a84
                      body: >
                        With this change the aufs data is kept around until the
                        next time we

                        start. If we find both an aufs AND an overlay2 storage
                        root, we cleanup

                        the aufs data.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.19
                  date: 2021-06-10T15:42:25.482Z
          version: meta-balena-2.82.7
          date: 2021-07-15T19:58:41.996Z
        - commits:
            - subject: 'dnsmasq: Restart when config.json changes'
              hash: 76964657321934e2953c02ee8fdba4d22a9fbcdc
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'balena-config-vars: Restart target when config.json changes'
              hash: 51005c7a3178bdc73dcff5f790a693aa70936d06
              body: >
                The config.json watcher service will restart the config.json
                target

                when the file changes. Any services that are PartOf config.json

                target will be restarted as well.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'balena-config-vars: Add config-json.target service'
              hash: cacb87d1b088ab1ab42b24b698e4c03d3803855e
              body: |
                This target service can be used to restart other services
                that have explicitly set themselves as PartOf this target.

                So a service that should be restarted when config.json changes
                can use PartOf=config-json.target to be triggered automatically.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'balena-config-vars: Restore null as valid for dnsServers'
              hash: 22602e4c2fafc0f309add8313c14464ba8cd8d4b
              body: |
                "null" is a valid setting in config.json that should write
                an empty string for dns servers rather than the default 8.8.8.8

                If "servers=null" is written to /run/dnsmasq.servers by
                balena-net-config then dnsmasq will report the following error:

                dnsmasq[4483]: bad address at line 2 of /run/dnsmasq.servers
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.82.6
          date: 2021-07-15T11:17:28.470Z
        - commits:
            - subject: 'kernel-headers-test: Update base image to buster'
              hash: 57f6aee369e8ec4ab8b20ae82a03f8b8fd7aebe4
              body: >
                Since we don't have devices using older 3.x kernels we update to
                a newer

                base image so that we don't have problems compiling this test
                kernel

                module on newer kernels.

                This avoids a compile error on kernel 5.10.31 on arm64

                raspberrypicm4-ioboard for example where it would complain
                _mcount is

                undefined because the older gcc in the
                intel-nuc-debian:stretch-20190717

                base image would not create the _mcount symbol when compiling
                against

                the newer 5.10.31 kernel.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.82.5
          date: 2021-07-15T05:18:57.029Z
        - commits:
            - subject: 'tests: Add hup test suite'
              hash: 7223cf082fb40e9c707730c19f640d64187516a7
              body: >
                Add smoke test


                Resolve `latest` to dev variant


                If we want the serial logs of the DUT the image that is flashed
                needs to

                be the development variant. The `latest` shortcut however always

                resolves to the production image. We manually resolve the
                version to fix

                this.


                Change image name for consistent docker image pulls
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.82.4
          date: 2021-07-14T15:51:22.288Z
        - commits:
            - subject: Check that the hostapp image fits the inactive partion on HUP
              hash: a0803fcfff0e908f4ed358d0568c4872bbcecade
              body: >
                Currently it is possible to build a docker image that will then
                fail to

                hup due to a lack of space on the inactive partition.


                Add a task to check the docker image space against the available
                space on

                the root filesystem partition and fail the build if it's too
                big.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Check that the hostapp image fits the inactive partion on HUP
                changelog-entry: Check that the hostapp image fits the inactive partion on HUP
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image-balena: Add check for docker image size'
              hash: 9a75a872dfcf0c3d71d4d5584241b65d07bd7103
              body: >
                Currently it is possible to build a docker image that will then
                fail to

                hup due to a lack of space on the inactive partition.


                Add a task to check the docker image space against the available
                space on

                the root filesystem partition and fail the build if it's too
                big.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-image: Break down the rootfs image size calculation'
              hash: 8a2b704bd5103ba6419328d0f9cc3d6b667ab5f5
              body: >
                Replace the IMAGE_ROOTFS_SIZE magic number with a calculation
                based on

                the partition sizes on the balena image classes.


                The rootfs size is calculated with the assumption of a total
                BalenaOS

                size of 700M. This includes boot, state, rootA and rootB
                partitions. The

                data partition will then grow to occupy the rest of the storage
                media.


                Device integration layers can override this value if needed.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image_types_balena: Add rootfs size calculation function'
              hash: a4ede069d1ab7cbd2b6830574eb891f8c76a92a9
              body: >
                Instead of hardcoding the requested root filesystem value, let's
                explain

                how the calculation is made with a python function that will
                adjust based

                on the sizes of other partitions.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.82.3
          date: 2021-07-13T11:18:32.393Z
        - commits:
            - subject: Update balena-supervisor from v12.8.8 to v12.9.3
              hash: 7903a929e48af889b8df14754d84a8e6b0655752
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supervisor from v12.8.8 to v12.9.3
                changelog-entry: Update balena-supervisor from v12.8.8 to v12.9.3
                Signed-off-by: Miguel Casqueira <miguel@balena.io>
                signed-off-by: Miguel Casqueira <miguel@balena.io>
              author: Miguel Casqueira
              nested: []
          version: meta-balena-2.82.2
          date: 2021-07-13T01:37:11.482Z
        - commits:
            - subject: 'balena-hostname: add comments and improve logging'
              hash: a7a2bb057e22e2ac4fc4cafaf6ba3b533ca5f464
              body: |
                Add some comments and improve the logging.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'balena-hostname: add comments and improve logging'
                changelog-entry: 'balena-hostname: add comments and improve logging'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'meta-balena: rename resin-hostname to balena-hostname'
              hash: 55baa1687ca3c576077b26a31591304911be2581
              body: |
                Rename 'resin-hostname' to 'balena-hostname' and update all
                references.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'meta-balena: rename resin-hostname to balena-hostname'
                changelog-entry: 'meta-balena: rename resin-hostname to balena-hostname'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.82.1
          date: 2021-07-12T13:01:41.540Z
        - commits:
            - subject: 'networkmanager: Rename references to resin'
              hash: c857ecc07325e643c39d30f68621c2807664e36e
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'resin-proxy-config: Rename to balena-proxy-config'
              hash: 9e40219affeae1e5f7d888439654f9e40cef5fc0
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'resin-ntp-config: Rename to balena-ntp-config'
              hash: e534f24dbce8d883c867d52538ab721c423566a2
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'resin-net-config: Rename to balena-net-config'
              hash: a3726f421840e0facc21dde81b00a5e0d70e49ba
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.82.0
          date: 2021-07-10T11:13:11.567Z
        - commits:
            - subject: 'balena-engine: Restore previous systemd service settings'
              hash: 0b7dac9461193e6c1afbc046337aeb74ca20e84c
              body: |
                - remove exec-root path from balena engine
                - restore unique fixed-cidr for balena-host engine
                - remove duplicate fixed-cidr flags from both
                - remove experimental from balena-host
                - fix healthdog command substitution

                These were changed by mistake in the previous refactor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.81.1
          date: 2021-07-09T23:25:52.084Z
        - commits:
            - subject: 'recipes-core: add a ''network connectivity wait'' service'
              hash: a6781d54c6edced457ad916cac3fec9c70d25a0a
              body: >
                Add a new systemd service to check for full network
                connectivity.

                This service is required because the default NetworkManager (NM)

                connectivity checker doesn't differentiate between the

                CONNECTED_LOCAL, CONNECTED_SITE and CONNECTED_GLOBAL states.
                This

                service checks for the CONNECTED_GLOBAL state only and can be
                used

                to delay the start of other services which require full network

                access to be available. This can help to avoid startup problems
                on

                networks with slow DNS access or that utilise a captive portal.


                The script does an initial oneshot check of the NM state to make
                sure

                that we don't wait for an event that doesn't come. This check is

                redundant at boot time due to the fact that the service is
                started

                before NM to ensure that no NM DBus events are missed. The
                initial

                check is useful in circumstances where you want to run the
                script

                standalone or post-boot.


                Other services that wish to make use of this service and wait
                for

                full network connectivity should add the following entries to
                their

                systemd unit definition:


                Requires=balena-net-connectivity-wait.target

                After=balena-net-connectivity-wait.target
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: 'recipes-core: add a ''network connectivity wait'' service'
                changelog-entry: 'recipes-core: add a ''network connectivity wait'' service'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.81.0
          date: 2021-07-06T09:28:12.840Z
        - commits:
            - subject: Remove CODEOWNERS
              hash: da8bfafc94a3815ad62658846d46ec0b4a3edb9b
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.80.12
          date: 2021-07-05T12:26:53.005Z
        - commits:
            - subject: get journal logs at the end of the suite
              hash: 5d6089c3c8210db34ed0e23864b0ec25579d43e4
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.80.11
          date: 2021-07-01T11:51:12.849Z
        - commits:
            - subject: 'hostapp-update-hooks: Migrate supervisor database'
              hash: cad3e4cc49c4fbc275a5448c38e2da550e596573
              body: |
                forward_supervisor-db will ensure the supervisor database
                is copied to the new location

                fwd_commit_supervisor-db will remove the old supervisor
                database after confirming the new database has been used
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: >-
                hostapp-update-hooks: Revert sv database path used by previous
                hooks
              hash: ef8aa041e4957ef138608959ae87ca9eea7b0774
              body: |
                This probably should not have been changed during the
                supervisor rename as it applies to a specific OS issue #2070
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.80.10
          date: 2021-06-24T19:51:43.564Z
        - commits:
            - subject: 'balena-engine: refactor systemd service'
              hash: 8227a61f6bef6d93cc6a5acd0ef93a2012079964
              body: >
                This makes it easier to overwrite the arguments passed in the
                engine

                unit from drop-in overwrites. See the development image drop-in
                unit for

                reference.


                Using `systemctl edit --runtime balena.service`, which puts
                those

                overwrites into `/run/systemd/system/balena.service.d/`, it
                would be

                possible to modify the runtime behavior of the engine without
                remounting

                the rootfs to be writeable.


                See
                https://www.freedesktop.org/software/systemd/man/systemd.unit.html#System%20Unit%20Search%20Path
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.80.9
          date: 2021-06-21T14:04:07.493Z
        - commits:
            - subject: Update balena-supervisor from v12.8.7 to v12.8.8
              hash: 713342af1f30442613a3f8cdf38552d10294a1d5
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supervisor from v12.8.7 to v12.8.8
                changelog-entry: Update balena-supervisor from v12.8.7 to v12.8.8
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.80.8
          date: 2021-06-21T08:24:21.670Z
        - commits:
            - subject: prevent failed teardown from making test hang
              hash: 47b439dfd12a66171ced7b710502dc143fedb686
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.80.7
          date: 2021-06-18T10:03:31.173Z
        - commits:
            - subject: catch error if image path is corrupted
              hash: 883fb0e8ac2570763d5857e1a3f2e3cc8b6fc8b2
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.80.6
          date: 2021-06-17T14:47:58.695Z
        - commits:
            - subject: >-
                update-balena-supervisor: Improve obtaining the supervisor
                directory name
              hash: 4ed241617668a0d3cc2d505a052bb9cba3178cea
              body: |
                There are better ways of getting the supervisor
                configuration directory name, let's switch to
                them to improve robustness.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
            - subject: Update balena-supervisor from v12.7.0 to v12.8.7
              hash: b935b594c12a2cdd54871bfb064d5cc843442e53
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supervisor from v12.7.0 to v12.8.7
                changelog-entry: Update balena-supervisor from v12.7.0 to v12.8.7
                Signed-off-by: Miguel Casqueira <miguel@balena.io>
                signed-off-by: Miguel Casqueira <miguel@balena.io>
              author: Miguel Casqueira
              nested: []
          version: meta-balena-2.80.5
          date: 2021-06-17T14:36:11.613Z
        - commits:
            - subject: 'kernel-headers-test: simplify example module Makefile'
              hash: 88df9d672d45b7d0bf59d4656654091c3bbfd56b
              body: >
                The example kernel module has some unnecessary variables and
                targets.

                Simplify this makefile by passing the kernel source directory to
                make,

                and using the M variable to build the module.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'kernel-headers-test: simplify example module Makefile'
                changelog-entry: 'kernel-headers-test: simplify example module Makefile'
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.80.4
          date: 2021-06-14T21:02:06.713Z
        - commits:
            - subject: Add oneshot service to migrate supervisor state config
              hash: d965d23fe60db6254eaabd81a0d48b5718e01a3a
              body: >
                The hostapp-update hooks would run before the supervisor update
                step

                when using balenahup via the dashboard. This resulted in the
                balena

                supervisor state conf file being out-of-date.


                This commit removes the hostapp-update hook and instead uses a

                oneshot service to ensure the conf is migrated if it does not
                exist

                in the new path before starting the supervisor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.80.3
          date: 2021-06-10T13:47:28.925Z
        - commits:
            - subject: >-
                update-balena-supervisor: Refactor script to ensure target
                version is ran
              hash: 0433c666bf4756df30312f0d59ad8a8b94b062ab
              body: |
                This is a rebase of PR 2180 by Miguel,
                which improves stability for the
                supervisor update.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.80.2
          date: 2021-06-09T09:54:10.830Z
        - commits:
            - subject: 'bluez5: Disable PnP Device Information service'
              hash: afb3dc0441e9ed0f2f9a08de5dd2a9cc75f09ac3
              body: >
                This reverts to the behavior before v5.56 as it interferes with
                user defined

                Device Information profiles.


                For more information: https://github.com/bluez/bluez/issues/101
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.80.1
          date: 2021-06-07T12:35:18.823Z
        - commits:
            - subject: Revert Go 1.16 recipes
              hash: 4303346ccda6d3e3c4f83cc3782c73a6d1adb494
              body: >
                balena-engine requires fixes backported from upstream to support
                a newer

                version of Go, and retaining the new recipes while switching
                back to the

                supported version of Go using the GOVERSION variable is still a
                work in

                process. Revert these changes for now. We can merge the new
                recipes

                back in once the build issues are resolved.


                This reverts commit f36dbd96684f9adfc5ce6faa57aa26fc4ba8e34e,
                reversing

                changes made to b228aea720fd1536ac6904b1886b2d445a582fc9.
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Revert Go 1.16 recipes
                changelog-entry: Revert Go 1.16 recipes
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.80.0
          date: 2021-06-07T08:31:41.036Z
        - commits:
            - subject: 'supervisor: Remove symlink to legacy resin sysconfig'
              hash: 2b04b5a776c9e996ded53dd7c405755c6543d7e5
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: >-
                hostapp-update-hooks: Migrate resin-supervisor to
                balena-supervisor
              hash: 19a9bfc2f172368c8652a448e77a77563a5c32a4
              body: >
                After a hostapp-update we need to migrate the supervisor.conf
                currently

                mounted from /etc/resin-supervisor in the state cache partition.


                Avoid deleting the old supervisor state cache in case of
                rollback.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'supervisor: Remove legacy resin supervisor container'
              hash: d8dd730edd9e4f4c87fcc0f4774097add68f3422
              body: |
                Clean up the legacy resin supervisor container if it exists
                after a hostapp update.

                Also check that supervisor.conf exists before attempting
                to start the service.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.79.10
          date: 2021-06-03T16:04:52.063Z
        - commits:
            - subject: 'hostapp-update-hooks: Sync to disk when hook is done'
              hash: 9688de53a3d6ae143b74bb1a7ea446b073755b27
              body: >
                This makes sure the hook changes are committed if the power is
                lost.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'extract-balena-ca: Sync changes to disk in case of power loss'
              hash: 62302a2149b886b5e44cd2cc93bdc70e55227bb0
              body: >
                Sync changes to disk once the certificates have been updated.
                This

                minimizes the risk of the custom CA to be committed without
                having the

                certificates updated.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                resin-net-config: Make sure to sync changes to disk in case of
                power loss
              hash: e5733363c4ba2a3e31c4613b34e66e072517d1c8
              body: >
                Commit disk modifications to minimize data loss in event of
                power loss.


                Fixes #2141
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.79.9
          date: 2021-06-03T13:15:41.101Z
        - commits:
            - subject: 'bluez: Set policy configuration to AutoEnable'
              hash: 614eaf745b29f6e5f373f9c712a7c533373a6187
              body: >
                Since bluez 5.35, the bluetooth daemon has the ability to power
                on

                controllers instead of using the unreliable `hciconfig hci0 up`.


                http://www.bluez.org/release-of-bluez-5-35/


                This commit makes this the default for BalenaOS.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'bluez5: Replace executable path directory in unit file'
              hash: 809da983829e97e5cddc424c4ff95054e2404ef0
              body: >
                The unit file is left with a placeholder to perform the
                substitution.

                Previously this was replaced by autoconf.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.79.8
          date: 2021-06-02T12:32:03.789Z
        - commits:
            - subject: 'meta-balena: rename connectivity packagegroup'
              hash: 8f54c4137f8bb8a83a05d9963cdb1565778c737b
              body: |
                Rename the resin-connectivity packagegroup.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'meta-balena: rename connectivity packagegroup'
                changelog-entry: 'meta-balena: rename connectivity packagegroup'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.79.7
          date: 2021-05-26T15:03:08.108Z
        - commits:
            - subject: 'bluez5: Use bluez5 recipe from poky master'
              hash: fe3c870eef75927eac740bbc1e8e15b8ed9c7341
              body: |
                This commit brings the bluez5 recipe from poky master as we need
                to control which bluez5 version is used in meta-balena.

                The code originates from poky's master branch -
                c887238347295c87dacf8a08e6d703603436d0bc.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.79.6
          date: 2021-05-26T08:26:16.310Z
        - commits:
            - subject: 'README: Update supported Yocto versions'
              hash: cdbf76ccbaaf6e265f8432eca10d42e55b6969e8
              body: >
                Add the warrior and dunfell versions to the list of tested
                releases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.79.5
          date: 2021-05-21T20:01:11.657Z
        - commits:
            - subject: Skip some services when running under docker
              hash: 8ef8078de0f1e65adab784c6456d66cf82ee4774
              body: |
                * skip setting up zram swap
                * dont' attempt to mount inactive partition
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.79.4
          date: 2021-05-21T10:15:56.497Z
        - commits:
            - subject: 'kernel-resin: disable panic on hung task'
              hash: ac0ba89f14c0b04b7353192f15a0634be44d910c
              body: >
                Some BSPs have enabled CONFIG_BOOTPARAM_HUNG_TASK_PANIC which

                can trigger panics upon high iowait, such as balena-engine

                downloading/writing a large image to disk.


                Kconfig says the following:

                    Say Y here to enable the kernel to panic on "hung tasks",
                    which are bugs that cause the kernel to leave a task stuck
                    in uninterruptible "D" state.

                    The panic can be used in combination with panic_timeout,
                    to cause the system to reboot automatically after a
                    hung task has been detected. This feature is useful for
                    high-availability systems that have uptime guarantees and
                    where a hung tasks must be resolved ASAP.

                    Say N if unsure.

                Hung tasks are not normally terminal, nor do they affect system

                stability, but panicking during an image write forces a device
                into a

                bootloop that requires manual intervention to remedy.


                See the below stacktrace:


                [  243.565482] INFO: task balenad:4049 blocked for more than 120
                seconds.

                [  243.565737]       Not tainted 4.9.140-l4t-r32.4 #1

                [  243.565853] "echo 0 >
                /proc/sys/kernel/hung_task_timeout_secs" disables this message.

                [  243.566032] balenad         D    0  4049      1 0x00000008

                [  243.566236] Call trace:

                [  243.566354] [<ffffff80080863a4>] __switch_to+0x9c/0xc0

                [  243.566479] [<ffffff8008f0d09c>] __schedule+0x22c/0x570

                [  243.566590] [<ffffff8008f0d420>] schedule+0x40/0xa8

                [  243.566744] [<ffffff8008f1057c>]
                rwsem_down_read_failed+0xd4/0x128

                [  243.566872] [<ffffff8008f0f8a8>] down_read+0x58/0x60

                [  243.566999] [<ffffff8008263568>] iterate_supers+0x78/0x138

                [  243.567131] [<ffffff800829bac0>] sys_sync+0x50/0xc0

                [  243.567237] [<ffffff8008083900>] el0_svc_naked+0x34/0x38

                [  243.567394] Kernel panic - not syncing: hung_task: blocked
                tasks

                [  243.567533] CPU: 3 PID: 47 Comm: khungtaskd Not tainted
                4.9.140-l4t-r32.4 #1

                [  243.567819] Hardware name: NVIDIA Jetson Xavier NX Developer
                Kit (DT)

                [  243.568318] Call trace:

                [  243.568508] [<ffffff800808c678>] dump_backtrace+0x0/0x1a8

                [  243.571026] [<ffffff800808c844>] show_stack+0x24/0x30

                [  243.576195] [<ffffff800841f4e8>] dump_stack+0x94/0xbc

                [  243.581446] [<ffffff80081c3db0>] panic+0x128/0x28c

                [  243.586599] [<ffffff8008178190>] watchdog+0x2f8/0x398

                [  243.591760] [<ffffff80080dcd60>] kthread+0x100/0x108

                [  243.596477] [<ffffff80080838a0>] ret_from_fork+0x10/0x30

                [  243.602257] SMP: stopping secondary CPUs

                [  243.605897] Kernel Offset: disabled

                [  243.609511] Memory Limit: none

                [  243.612484] trusty-log panic notifier - trusty version Built:
                12:18:19 Oct 16 2020 [  243.636124] Rebooting in 1 seconds..


                Disable this config for all platforms.
              footer:
                Changelog-entry: 'kernel-resin: disable panic on hung task'
                changelog-entry: 'kernel-resin: disable panic on hung task'
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.79.3
          date: 2021-05-20T08:04:17.185Z
        - commits:
            - subject: Add boot-splash test to unmanaged suite
              hash: a6865f22ba5d5bd60f659daac113cac6ae1aa8f3
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.79.2
          date: 2021-05-19T09:25:55.145Z
        - commits:
            - subject: 'balena-os: Add preferred provider for Go native'
              hash: 20dd5fb4384e78f24d3e3304be38666fdcb859a8
              body: >
                With Go 1.16 a precompiled go-binary-native that provides
                go-native was

                introduced to bootstrap the Go compilation.

                Specify to use the go-native recipe and not go-binary-native
                when

                requiring go-native.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.79.1
          date: 2021-05-18T08:37:41.159Z
        - commits:
            - subject: 'balena-engine: build in GOPATH mode'
              hash: 342a9621b5416d2a1f6aec3948dfdcfe15395d13
              body: >
                balena-engine hasn't transitioned to building with modules yet,
                and Go

                1.16 enabled them by default. Revert to the old behavior for now
                to fix
                  the build.

                This option will be removed in Go 1.17, so we'll have to update
                our

                build before upgrading further.


                https://blog.golang.org/go116-module-changes
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'recipes-devtools: go: backport get_linuxloader'
              hash: 283e7d279ed26c2855b4916c24bb502e2d87a189
              body: >
                Hardknott introduces get_linuxloader() to linuxloader.bbclass
                that

                allows for dynamically choosing between different c libraries,
                which go

                recipes depend on.


                Add an include that backports this for older Yocto releases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'meta-resin-pyro: go-native: include fix-goarch.inc'
              hash: 252521185190ac2730fa8a92a5565a6069104e25
              body: "This fixes the error:\n\n\tInvalid GOMIPS value. Must be hardfloat or softfloat.\n"
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
                signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
              author: Joseph Kogut
              nested: []
            - subject: 'meta-balena-common: upgrade from go 1.12.17 to 1.16.2'
              hash: a395e1bdaaba8050042d011e6e5fe40311216d58
              body: |
                Copy the unmodified golang recipes from poky commit 464472d to
                meta-balena-common/recipes-devtools.

                This shaves off approximately:
                balena-engine 41M -> 34M (17%)
                init (mobynit) 9.5M -> 7.9M (16.8%)
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
                signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.79.0
          date: 2021-05-13T18:25:01.396Z
        - commits:
            - subject: 'balena-config-vars: improve handling of NM config parameters'
              hash: 61280e84e045a4b235a21eec194fc8cf894c310d
              body: >
                Improve the handling of the os.network.* parameters defined in

                config.json.


                The balena-config-vars script has been updated to process the

                os.network.* parameters from config.json. This allows scripts

                to access these parameters by just including balena-config-vars

                rather than having to parse them directly. Some of the default

                settings have now been included as part of the jq parsing
                string.

                The jq command has also been assigned to an interim variable
                rather

                than being evaluated directly. This allows other scripts which

                include balena-config-vars to handle parsing errors correctly
                when

                they are running with 'set -e'.


                The os-networkmanager script has been updated to make use of the

                balena-config-vars script and no longer parses config.json
                itself.

                The logging has been standardised and the simplification of the

                variable processing has reduced the size of the script from 146

                to 101 lines.


                The build time tests have been removed as the os-networkmanager
                script

                is unable to access /usr/sbin/balena-config-vars at buildtime.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'balena-config-vars: improve handling of NM config parameters'
                changelog-entry: 'balena-config-vars: improve handling of NM config parameters'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.78.2
          date: 2021-05-13T15:17:52.402Z
        - commits:
            - subject: Add Device Tree tests
              hash: f59b7e0d54098e000d7fb3ce2b4811fa91351769
              body: |
                1. Add DToverlay & DTparam tests
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.78.1
          date: 2021-05-12T21:38:32.558Z
        - commits:
            - subject: Add symlinks and aliases for legacy resin namespaces
              hash: 16f5437233e88af276d9cce7bc99dd1230f6f10d
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: Rename resin-supervisor to balena-supervisor
              hash: 8c0b17bc3dbcf0674c7083d5a8dacff64cca48c1
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.78.0
          date: 2021-05-10T21:41:51.607Z
        - commits:
            - subject: Update balena-supservisor from v12.5.10 to v12.7.0
              hash: d2e3f092a213b8810e4bb922ad3f2a08135129c5
              body: |
                Update balena-supervisor from 12.5.10 to 12.7.0
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supservisor from v12.5.10 to v12.7.0
                changelog-entry: Update balena-supservisor from v12.5.10 to v12.7.0
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested:
                - commits:
                    - subject: Backwards compatility changes for old resin namespaces
                      hash: 301aa52f032fecd29495894e828f21a93df60caa
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                    - subject: Change container name to balena_supervisor
                      hash: 09615c9d8254d3f62ef1088d0da35485b0c18734
                      body: ''
                      footer:
                        Change-type: minor
                        change-type: minor
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                    - subject: Rename resin-supervisor to balena-supervisor
                      hash: 5faf9d7686d7f03b5bb73ef9a234038e7e61037c
                      body: ''
                      footer:
                        Change-type: minor
                        change-type: minor
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.7.0
                  date: 2021-05-07T12:05:43.135Z
                - commits:
                    - subject: >-
                        Show warning instead of exception for invalid network
                        config
                      hash: 5197a1330d69cbff97f3c53a77f640638e074b8a
                      body: >
                        A previous PR (#1656) fixed validation for network ipam
                        config,

                        checking that both network and subnet are defined for
                        each ipam config entry

                        (as described in the docker documentation).


                        After that PR, the validations throws an exception if
                        the network target state is incorrect,

                        but this turns out to be the wrong approach, because
                        that exception is also triggered

                        when querying target state.


                        This isn't a problem in normal operation, but it is in
                        local mode, because local

                        mode queries the old target state before sending a new
                        one. Since the query fails,

                        the CLI can never push the new target state.


                        This PR replaces the exception with a warning on the
                        logs, since a

                        misconfigured network won't cause any engine failures,
                        it will just

                        prevent containers to communicate through the provided
                        network.


                        A future improvement should move this validation to an
                        earlier point in the process,

                        so the target state can get rejected before it even gets
                        to a point it

                        can be used.
                      footer:
                        Relates-to: '#1693'
                        relates-to: '#1693'
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.6.8
                  date: 2021-05-06T20:30:52.075Z
                - commits:
                    - subject: >-
                        Patch awaiting response when checking if supervisor0
                        network exists
                      hash: 8b0c2347d8d04d3c7101016f6c885f31d9b3dc6a
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.6.7
                  date: 2021-05-06T15:58:02.661Z
                - commits:
                    - subject: >-
                        Fix parsing driver_opts from compose to docker network
                        creation
                      hash: 1408fd7bcb5f25b75679b7ce0e509adc7f8f6004
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: quentinGllmt <quentin@quentingllmt.fr>
                        signed-off-by: quentinGllmt <quentin@quentingllmt.fr>
                      author: quentinGllmt
                      nested: []
                  version: balena-supervisor-12.6.6
                  date: 2021-05-06T14:52:59.431Z
                - commits:
                    - subject: >-
                        Update balena-register-device and send extra info at
                        provision time
                      hash: 9e52bb33ac931a035b4cd0fd80173bf10db771c0
                      body: >
                        This extra info will mean the API is able to immediately
                        set default

                        config vars based on the os/supervisor version so that
                        they are

                        available on the first target state fetch rather than
                        having a delay

                        whilst waiting for the supervisor to report them as part
                        of a state

                        patch


                        Update balena-register-device from 6.1.6 to 7.2.0
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Pagan Gazzard
                      nested:
                        - commits:
                            - subject: >-
                                Support
                                `supervisorVersion`/`osVersion`/`osVariant`/`macAddress`
                                fields
                              hash: 6f10fe77ba11ec57bb012777975423dda498a8bd
                              body: ''
                              footer:
                                Change-type: minor
                                change-type: minor
                              author: Pagan Gazzard
                          version: balena-register-device-7.2.0
                          date: 2021-04-29T12:35:30.543Z
                        - commits:
                            - subject: Update dependencies
                              hash: 8d78459d6cf6e0dcaa4721c38898eeb2d25c5674
                              body: ''
                              footer:
                                Change-type: patch
                                change-type: patch
                              author: Pagan Gazzard
                          version: balena-register-device-7.1.1
                          date: 2021-04-29T12:23:50.655Z
                        - commits:
                            - subject: >-
                                Switch from randomstring to uuid for generating
                                device uuids
                              hash: 596a76abcf0a76aef93d191e4c59b939701c80b8
                              body: ''
                              footer:
                                Change-type: minor
                                change-type: minor
                              author: Pagan Gazzard
                          version: balena-register-device-7.1.0
                          date: 2020-07-13T14:38:52.915Z
                        - commits:
                            - subject: >-
                                Add .versionbot/CHANGELOG.yml for nested
                                changelogs
                              hash: 7444f4ba2538180a5c75fa5f62de6f395ae28ba7
                              body: ''
                              footer:
                                Change-type: patch
                                change-type: patch
                              author: Pagan Gazzard
                          version: balena-register-device-7.0.1
                          date: 2020-07-13T13:03:45.818Z
                        - commits:
                            - author: Pagan Gazzard
                              body: ''
                              hash: 8cfa23ebbe2915b2f37730972cf104cb47f68c65
                              subject: Convert to type checked javascript
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: 0f3e9d26f375554f793dd632b94f33e3ee88933b
                              subject: >-
                                Drop callback interface in favor of promise
                                interface
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: 67d46678e910c2c8b11f417fa40d00781a1a3905
                              subject: Switch to a named export
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: faa9edc73cf243acd2abe1532e64aab8303031b5
                              subject: Convert to typescript
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: 9e5bdbeaee325c8a523c8498ef023baeb49ef7c1
                              subject: Update to typed-error 3.x
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: 27e78f2ea3f1a059a9fb2ba43dff55f32b0b2b4a
                              subject: Switch to returning native promises
                            - author: Pagan Gazzard
                              body: ''
                              footers:
                                change-type: major
                              hash: dc21eb20dba1a977e74ffadbece66720ced4c529
                              subject: Update to balena-request 11.x
                            - author: Pagan Gazzard
                              body: ''
                              hash: f4008dad3de415cc25987268b387848fc3ed1200
                              subject: Use typescript import helpers
                          date: '2020-07-06T18:11:23Z'
                          version: balena-register-device-7.0.0
                  version: balena-supervisor-12.6.5
                  date: 2021-05-06T10:19:39.399Z
                - commits:
                    - subject: Log error responses from API when reporting state
                      hash: 2203f78d517a9edf75a261dd3c77cdf5b609548c
                      body: >
                        This adds the error message from the API to journal logs
                        to better

                        identify those cases where patching to the API fails.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Relates-to: '#1680'
                        relates-to: '#1680'
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.6.4
                  date: 2021-05-05T19:06:49.805Z
                - commits:
                    - subject: >-
                        Added configurations.md to document all configurable
                        vars
                      hash: 07a0344dc6ac15a67513080c63dffe0d6b811ebf
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Closes: '#1646'
                        closes: '#1646'
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.6.3
                  date: 2021-05-04T02:10:52.553Z
                - commits:
                    - subject: Remove version tag from livepush generated image
                      hash: 9c1d10dc318bb7c207608ed197c5713960642af3
                      body: >
                        The `start-resin-supervisor` script in newer OS version
                        no longer uses the

                        SUPERVISOR_TAG environment variable setup on
                        supervisor.conf and

                        update-supervisor.conf.


                        This change removes the need for that variable with
                        livepush supervisor

                        to make it compatible with older and newer OS versions
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.6.2
                  date: 2021-04-30T19:54:33.136Z
                - commits:
                    - subject: 'Remove mz, mkdirp, body-parser dependencies'
                      hash: 4a2ac557ef11d334154bafa0cab4e7272cbed749
                      body: |
                        'mz' can be safely replaced with fs.promises
                        and util.promisify for faster native methods.
                        'mkdirp' after Node v8 uses native fs.mkdir, thus
                        is redundant. 'body-parser' is deprecated and
                        contained within express v4.x.
                      footer:
                        Closes: '#1567'
                        closes: '#1567'
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Christina Wang <christina@balena.io>
                        signed-off-by: Christina Wang <christina@balena.io>
                      author: Christina Wang
                      nested: []
                  version: balena-supervisor-12.6.1
                  date: 2021-04-27T22:23:07.811Z
                - commits:
                    - subject: Bump dockerode types to 2.5.34
                      hash: 95fb568aaeb0d5a0fa8b4b88f650b51d3b96786d
                      body: >
                        This commit updates dockerode types to the latest 2.x
                        version, removing the need

                        for custom composer types for network.


                        This commit also modifies network tests to use the new
                        types
                      footer:
                        Change-type: minor
                        change-type: minor
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.6.0
                  date: 2021-04-27T17:10:23.382Z
                - commits:
                    - subject: Enable docker layer caching on CircleCI
                      hash: dd2df215f0c62459f3e26c56efdfce26edbcc229
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.5.16
                  date: 2021-04-27T16:42:23.485Z
                - commits:
                    - subject: >-
                        Added clean step to remove previous builds before
                        running tests
                      hash: 6f4030634ad05f29f72cea11456a252570c470d7
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.5.15
                  date: 2021-04-26T19:55:49.189Z
                - commits:
                    - subject: 'balena-supervisor: replace references to resin-vars'
                      hash: 6ca9507beb616c4b344e4927cb5db01534c8ae4b
                      body: >
                        Replace all references to the 'resin-vars' script with

                        'balena-config-vars' as it has been renamed. Add a
                        conditional

                        test for compatibility with legacy systems.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Changelog-entry: 'balena-supervisor: replace references to resin-vars'
                        changelog-entry: 'balena-supervisor: replace references to resin-vars'
                        Signed-off-by: Mark Corbin <mark@balena.io>
                        signed-off-by: Mark Corbin <mark@balena.io>
                      author: Mark Corbin
                      nested: []
                  version: balena-supervisor-12.5.14
                  date: 2021-04-26T18:12:32.752Z
                - commits:
                    - subject: Update supervisor to typescript 4
                      hash: fd06c06092b61d349e8b40f66f847065368810e3
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.5.13
                  date: 2021-04-25T23:09:44.241Z
                - commits:
                    - subject: Bump ssri from 6.0.1 to 6.0.2
                      hash: ae8dc8ff227237444ae532cf7e817bfc463fbac5
                      body: >
                        Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to
                        6.0.2.

                        - [Release notes](https://github.com/npm/ssri/releases)

                        -
                        [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)

                        -
                        [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: 'dependabot[bot] <support@github.com>'
                        signed-off-by: 'dependabot[bot] <support@github.com>'
                      author: 'dependabot[bot]'
                      nested: []
                  version: balena-supervisor-12.5.12
                  date: 2021-04-20T22:52:22.531Z
                - commits:
                    - subject: Refactor extra_uEnv to not match with intel nuc
                      hash: e6eda0fca7b280aa5453972a26c36ab6895c227a
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.5.11
                  date: 2021-04-14T05:27:23.056Z
          version: meta-balena-2.77.2
          date: 2021-05-10T17:33:42.866Z
        - commits:
            - subject: Update os-config from v1.2.0 to v1.2.1
              hash: 028486aa61680bdc09068fdb07f3a61edfb96a5d
              body: |
                Includes rename of resin-supervisor to balena-supervisor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.77.1
          date: 2021-05-10T13:48:11.472Z
        - commits:
            - subject: 'grub update hook: move variables from grub.cfg to grubenv'
              hash: 76c82dd987215982dbfcbdf950588dafdc4c129e
              body: >
                In order to verify GPG signature of grub.cfg it must be
                immutable.

                All the variables should be stored in grubenv file. This means

                bootcount, resin_root_part and upgrade_available variables need

                to be moved to grubenv.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.77.0
          date: 2021-05-05T15:18:01.595Z
        - commits:
            - subject: 'kernel: Always include overlayfs support'
              hash: ddb5dff6b146dfc252aeecede59ad3acc79683f7
              body: >
                This is needed in preparation for storage migration from aufs to
                overlayfs.

                When running hostapp-update, we need to create the target
                hostapp on

                overlayfs, which implies the OS we update from can support both
                drivers
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.76.0
          date: 2021-04-30T16:01:42.415Z
        - commits:
            - subject: 'grub: grub-efi: buildin gzio for gz compressed kernels'
              hash: 6e0dd4407077d66fa9a0ac16b38a83f6cd46e9b2
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
                signed-off-by: Joseph Kogut <joseph.kogut@gmail.com>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.75.1
          date: 2021-04-29T19:31:21.361Z
        - commits:
            - subject: Update mobynit to the new multi-container hostOS specification
              hash: 93335381320815dbe7b2d21233106910a200e2f5
              body: >
                Update mobynit to use the new multi-container hostOS
                specification
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Update mobynit to the new multi-container hostOS specification
                changelog-entry: Update mobynit to the new multi-container hostOS specification
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.75.0
          date: 2021-04-22T12:36:31.239Z
  version: 2.83.10+rev1
  date: 2021-08-23T21:46:10.423Z
- commits:
    - subject: 'generic-amd64: install complete linux-firmware'
      hash: 85c4d7f0249d9f7c36c99767176f493b166ebe52
      body: |
        Instead of specifying specific subpackages, install entire
        linux-firmware package.
      footer:
        Changelog-entry: 'generic-amd64: install complete linux-firmware'
        changelog-entry: 'generic-amd64: install complete linux-firmware'
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
  version: 2.74.0+rev8
  date: 2021-08-23T21:28:19.080Z
- commits:
    - subject: 'balena-image: add linux-firmware-iwlwifi to generic-amd64'
      hash: 025bc0331b2c2d5599195ac43b1c18f2a139ccf5
      body: |
        This adds firmware for Intel wireless chipsets supported by the iwlwifi
        driver. Tested with AX200 chipset.
      footer:
        Changelog-entry: 'balena-image: add linux-firmware-iwlwifi to generic-amd64'
        changelog-entry: 'balena-image: add linux-firmware-iwlwifi to generic-amd64'
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
  version: 2.74.0+rev7
  date: 2021-08-05T14:08:22.728Z
- commits:
    - subject: Add balena-yocto-scripts upstream source
      hash: e61da71f937b16fff37a04754b86a301c9a7d3a1
      body: >
        This allows to add nested changelogs from the balena-yocto-scripts
        repository

        from version >= 1.14.1
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add balena-yocto-scripts upstream source
        changelog-entry: Add balena-yocto-scripts upstream source
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.74.0+rev6
  date: 2021-07-28T13:22:20.059Z
- commits:
    - subject: Update balena-yocto-scripts from v1.14.3 to v1.14.8
      hash: 33d490ced95a8c6ea062aa8b270ac198cdb70990
      body: |
        Update balena-yocto-scripts from 1.14.3 to 1.14.8
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.3 to v1.14.8
        changelog-entry: Update balena-yocto-scripts from v1.14.3 to v1.14.8
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 2.74.0+rev5
  date: 2021-07-27T19:03:55.263Z
- commits:
    - subject: 'meta-balena-generic: default to linux v5.10'
      hash: 850aee7cb1e23276760aa0a03241cd300b2b40a4
      body: ''
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: 'meta-balena-generic: default to linux v5.10'
        changelog-entry: 'meta-balena-generic: default to linux v5.10'
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
  version: 2.74.0+rev4
  date: 2021-06-10T18:50:09.124Z
- commits:
    - subject: Update balena-yocto-scripts to v1.14.3
      hash: 3cc3c27205c20cd5488370cbaa8926b973e94bd4
      body: ''
      footer:
        Changelog-entry: Update balena-yocto-scripts to v1.14.3
        changelog-entry: Update balena-yocto-scripts to v1.14.3
        Signed-off-by: Michal Toman <michalt@balena.io>
        signed-off-by: Michal Toman <michalt@balena.io>
      author: Michal Toman
      nested: []
  version: 2.74.0+rev3
  date: 2021-06-10T16:52:05.470Z
- commits:
    - subject: Remove unused dependent-devices folder
      hash: 0c28a070872b12e6f97bb5d8c5f5bdc507a22c3a
      body: |
        This is not a current product feature.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Remove unused dependent-devices folder
        changelog-entry: Remove unused dependent-devices folder
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.74.0+rev2
  date: 2021-05-13T17:19:03.068Z
- commits:
    - subject: Update meta-balena from v2.65.0 to v2.71.3
      hash: 6bf5e831eaa33fa1231008054d402ea05526177e
      body: |
        Update meta-balena from 2.65.0 to 2.71.3
      footer:
        Changelog-entry: Update meta-balena from v2.65.0 to v2.71.3
        changelog-entry: Update meta-balena from v2.65.0 to v2.71.3
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested:
        - commits:
            - subject: >-
                balena: Make the healthcheck loading service part of
                balena.service
              hash: c26f2d203a87d1578d9d52d5bbd8b0b18869916e
              body: >
                This prevents issues with the health check when the image is
                manually

                removed.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: 'https://github.com/balena-os/meta-balena/issues/2010'
                connects-to: 'https://github.com/balena-os/meta-balena/issues/2010'
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.71.3
          date: 2021-02-26T12:34:11.073Z
        - commits:
            - subject: 'dnsmasq: enable dbus support'
              hash: 372980ca6aa6bd2793ac856c303c3b3ac4eeffdb
              body: >
                This config option is disabled by default in the upstream
                package

                so I'm including the change here as a separate commit.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'dnsmasq: update to 2.84 with dnspooq fix'
              hash: 3afbe8dfbbaf9f73a09048e0350622535befa0a8
              body: >
                https://github.com/balena-os/meta-balena/issues/2099


                Copy dnsmasq 2.84 recipe and files from this upstream patch:


                http://cgit.openembedded.org/meta-openembedded/commit/meta-networking/recipes-support/dnsmasq?id=3e28a31bb479f292b9a052a3d2eee84c49319ee3
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.71.2
          date: 2021-02-23T19:57:37.313Z
        - commits:
            - subject: 'recipes-bsp: grub: install only release modules'
              hash: 78a8049218d8ce3a9172b7fca6fe00270544e7f1
              body: >
                GRUB builds modules with both debug and release variants, with
                *.module

                and *.mod extensions respectively.


                Install only the release modules in do_deploy() to avoid
                balooning the

                size of the boot partition.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.71.1
          date: 2021-02-23T17:59:51.133Z
        - commits:
            - subject: 'meta-balena-common: add grub-efi support'
              hash: 3bfbd05d81d59c82fb131117700325416fb152cb
              body: >
                Use upstream grub and grub-efi recipes with a new grub-conf
                recipe

                employing a config template.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.71.0
          date: 2021-02-15T17:58:51.450Z
        - commits:
            - subject: Update PR template to specify test coverage in more detail
              hash: ce0bb95e1d045ef32c377d4fc9de959c6ebbfd88
              body: >
                All PRs should include details about test coverage, including
                whether the

                tests are automated on manually recorded.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Update codeowners
              hash: a00b54679aa6804f6a5c9fa75826764cf21c5c2e
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.70.2
          date: 2021-02-12T09:31:46.288Z
        - commits:
            - subject: Add leviathan automated OS test suite
              hash: 3f6d7588874721c506a70f66603d2b153f9a6fcf
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.70.1
          date: 2021-02-11T16:18:58.778Z
        - commits:
            - subject: 'systemd/timeinit: use systemd mount unit for /etc/fake-hwclock'
              hash: 7d6ec3d411af78b9b1f979b90461e9efb059e4e7
              body: >
                Replace the 'bind-etc-fake-hwclock.service' with a systemd mount

                unit (etc-fake\x2dhwclock.mount).


                Using a systemd service to bind mount the /etc/fake-hwclock
                directory

                results in systemd generating an internal mount unit for the
                same

                directory. This causes problems at shutdown when both methods
                try to

                unmount the directory. This frequently leads to the directory
                being

                unmounted before the fake-hwclock service has managed to save
                the

                system time. This results in an inaccurate fake-hwclock time

                at next boot and corruption of the journal log.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: '#1919 #2107'
                connects-to: '#1919 #2107'
                Changelog-entry: 'systemd/timeinit: use systemd mount unit for /etc/fake-hwclock'
                changelog-entry: 'systemd/timeinit: use systemd mount unit for /etc/fake-hwclock'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.70.0
          date: 2021-02-11T10:02:08.246Z
        - commits:
            - subject: Update balena-supervisor from v12.3.0 to v12.3.5
              hash: 8f8a57760b82a1378adc078c86bb25aeafd7d6e8
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supervisor from v12.3.0 to v12.3.5
                changelog-entry: Update balena-supervisor from v12.3.0 to v12.3.5
                Signed-off-by: Miguel Casqueira <miguel@balena.io>
                signed-off-by: Miguel Casqueira <miguel@balena.io>
              author: Miguel Casqueira
              nested: []
          version: meta-balena-2.69.1
          date: 2021-02-03T23:42:05.644Z
        - commits:
            - subject: 'openvpn: remove resin-ntp-config call from upscript.sh'
              hash: 958cd8f4bfc5d052d29c5d60c43e9ede58e39825
              body: >
                Running resin-ntp-config from openvpn upscript.sh is no longer

                necessary as it is now run automatically when config.json
                changes.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: '#2073'
                connects-to: '#2073'
                Changelog-entry: 'openvpn: remove resin-ntp-config call from upscript.sh'
                changelog-entry: 'openvpn: remove resin-ntp-config call from upscript.sh'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'resin-vars: trigger NTP config script on config.json changes'
              hash: 8dd222087f58c596bf3d30a956c985fcb0214baa
              body: |
                Add resin-ntp-config.service to config-json.service so that the
                resin-ntp-config script is automatically run on changes to
                config.json.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: '#2073'
                connects-to: '#2073'
                Changelog-entry: 'resin-vars: trigger NTP config script on config.json changes'
                changelog-entry: 'resin-vars: trigger NTP config script on config.json changes'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'resin-ntp-config: update script and add systemd service'
              hash: 7084f736b988706f71fe1d1ec95db6641be8a85e
              body: >
                Update the resin-ntp-config script to work with dynamic chrony

                source configuration. Any NTP sources configured by config.json

                are added to a chrony sources file. Changes to the sources file

                are picked up by chrony either when it starts up or at runtime

                using the chrony-helper script.


                A systemd service has been added to run the resin-ntp-config
                script

                once at boot. Previously the script was being run up to 8 times
                at

                boot via a NetworkManager dispatcher script.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: '#2073'
                connects-to: '#2073'
                Changelog-entry: 'resin-ntp-config: update script and add systemd service'
                changelog-entry: 'resin-ntp-config: update script and add systemd service'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'networkmanager: add improved dispatcher scripts for NTP handling'
              hash: 23e52eaca7f0983ac6da27289fc293e43e7dbebd
              body: >
                Update the existing DHCP dispatcher script for adding NTP
                sources to

                make use of dynamic chrony source configuration. Any DHCP
                configured

                NTP sources for a particular interface are added to a sources
                file on

                network 'up' or DHCP lease renewal events. Any DHCP configured
                NTP

                sources for a particular interface are deleted on network 'down'

                events. Changes to the sources file are picked up by chrony
                either

                when it starts up or at runtime using the chrony-helper script.


                Add a dispatcher script to trigger the chrony online/offline

                status on network 'up' and 'down' events. This will make chrony

                re-run an iburst for sources when the appropriate network
                interface

                comes back up.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: '#2073'
                connects-to: '#2073'
                Changelog-entry: >-
                  networkmanager: add improved dispatcher scripts for NTP
                  handling
                changelog-entry: >-
                  networkmanager: add improved dispatcher scripts for NTP
                  handling
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'chrony: add sourcedir support and helper script'
              hash: d6c64b0a08b64593d6684605bd5268f28ff1b1c9
              body: >
                Add the 'sourcedir' parameter to the chrony configuration to
                support

                dynamic source configuration files. Any NTP source files that
                are

                created in 'sourcedir' (/run/chrony) can be used to update the
                chrony

                source configuration at runtime.


                Add a helper script to support the dynamic re-loading of chrony

                sources. This script uses the chrony 'reload sources' feature.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: '#2073'
                connects-to: '#2073'
                Changelog-entry: 'chrony: add sourcedir support and helper script'
                changelog-entry: 'chrony: add sourcedir support and helper script'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.69.0
          date: 2021-02-01T09:33:15.826Z
        - commits:
            - subject: Fix task ordering for the iwlwifi_firmware_clean task
              hash: 5d039b111a964e21a637a5c7806aea6bb510a43e
              body: >
                We need to make sure the firmware cleanup function runs before

                do_populate_sysroot otherwise do_populate_sysroot will race with
                it and

                will fail complaining about the missing firmware that

                iwlwifi_firmware_clean had just deleted at the same time.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Fix task ordering for the iwlwifi_firmware_clean task
                changelog-entry: Fix task ordering for the iwlwifi_firmware_clean task
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.68.1
          date: 2021-01-29T13:02:49.703Z
        - commits:
            - subject: Update NetworkManager to 1.28.0
              hash: 20e9c276f8d79b6051066e24b159c8bd9ffe3bc2
              body: >
                Fixes #2075


                Needed were a number of various changes to make the package
                compile properly:


                Removed is
                0001-wwan-Set-MTU-based-on-what-ModemManager-exposes.patch that
                is now

                included upstream.


                Our patch for removing HTTPS connectivity checking warning is
                reworked for ease of

                maintainance. It now keeps the log entry, but changes it to
                debug level.


                Fixed are UPSTREAM_CHECK_* definitions as they referenced a
                wrong version number.


                The following additional configuration options were
                added/removed:


                *. Introspection is disabled through
                `--enable-introspection=no`. Other services do

                not depend on it, so it is safe to remove it. A related patch is
                no longer needed

                0002-Do-not-create-settings-settings-property-documentati.patch


                *. A new option for using firewalld zone for shared mode is
                disabled as we do not

                use firewalld.


                *. The polkit agent option no longer is available, so
                `--enable-polkit-agent` and

                `--disable-polkit-agent` are no longer defined.
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Update NetworkManager to 1.28.0
                changelog-entry: Update NetworkManager to 1.28.0
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.68.0
          date: 2021-01-29T09:45:01.458Z
        - commits:
            - subject: 'docs: mention balenaRootCA as a config.json parameter'
              hash: d0be88530c630d68f8582dce99442c6d94ba5455
              body: ''
              footer:
                Connects-to: 'https://github.com/balena-os/meta-balena/issues/2011'
                connects-to: 'https://github.com/balena-os/meta-balena/issues/2011'
                Change-type: patch
                change-type: patch
                Signed-off-by: Matthew McGinn <matthew@balena.io>
                signed-off-by: Matthew McGinn <matthew@balena.io>
              author: Matthew McGinn
              nested: []
          version: meta-balena-2.67.6
          date: 2021-01-28T17:45:30.693Z
        - commits:
            - subject: 'replace busybox ps with procps [klutchell]'
              hash: 00556af37cf241e2b95d9b719f1ab58cc9bbddb6
              body: >
                Replace busybox ps link with ps.procps without installing

                any other procps packages. This will avoid regression and bloat

                from swapping existing busybox links with procps variants.


                By using procps as docker expects we can properly handle ps args

                such as -e and -o to format output. Busybox is only capable of
                this

                when compiled in "desktop" mode.


                This upstream commit to poky has already split the ps binary
                into

                a separate procps package:


                -
                https://git.yoctoproject.org/cgit/cgit.cgi/poky/commit/?id=507a47a4e5077d5f8f76d9629be6b871dfd8eb90


                So for now we can copy this recipe at the commit above into
                compat branches

                and use that version until we pick up a branch newer than
                gatesgarth.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: 'https://github.com/balena-os/balena-engine/issues/236'
                connects-to: 'https://github.com/balena-os/balena-engine/issues/236'
                Changelog-entry: 'replace busybox ps with procps [klutchell]'
                changelog-entry: 'replace busybox ps with procps [klutchell]'
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.67.5
          date: 2021-01-27T18:47:18.617Z
        - commits:
            - subject: Update aufs4 and aufs5 kernel patches
              hash: 62231bee3dd12698522130b224371ff82a3de567
              body: |
                We update to the newest patch revisions from upstream
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update aufs4 and aufs5 kernel patches
                changelog-entry: Update aufs4 and aufs5 kernel patches
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.67.4
          date: 2021-01-27T11:08:07.030Z
        - commits:
            - subject: 'kernel-headers-test: Install python dependency'
              hash: 6b648fa36bb8f7b2f90799a9c331210e34d3c438
              body: |
                Some makefiles for the kernel modules build, like for
                instance the one in the kernel for the lec-px30 machine,
                want python to be available in the environment. Let's add
                it to the build dependencies.
              footer:
                Change-type: Patch
                change-type: Patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.67.3
          date: 2021-01-15T11:10:16.824Z
        - commits:
            - subject: Fix pppd timeout when launched by NetworkManager
              hash: e86c83e9be007bbedf5bad8bb961931c4f4f649c
              body: >
                Fixes #1846


                UART modems (RaspberryPi HATs) are not working currently under

                balenaOS as NetworkManager times out while attempting to
                establish

                ppp connection. This is not a balenaOS specific issue.


                This commits adds a `connect ""` declaration to
                `/etc/ppp/options`

                to workaround this as the NULL default value causes the timeout.


                The connect option specifies an external script to establish the

                physical link. When using NetworkManager/ModemManager it is

                ModemManager that establishes the physical link before passing
                it

                to NetworkManager. Thus `connect` should be empty.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Fix pppd timeout when launched by NetworkManager
                changelog-entry: Fix pppd timeout when launched by NetworkManager
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.67.2
          date: 2021-01-14T12:39:10.901Z
        - commits:
            - subject: 'resin-device-register: Fix post provisioning state not reported'
              hash: 62016c3931c08cbc4c4bdb1e4069c6f9d9533b04
              body: >
                Starting with dee971c0dbeb6e8363f3e321af582e99627626e9, flasher

                images, which don't contain a supervisor version, try to
                register

                in the API using the parameter supervisor_version='null'.


                However, the API expects this parameter to be unset completely
                if

                there's no version to be reported during registration, otherwise

                the call fails and the device doesn't show up in dashboard
                during

                flashing or report the post-provisioning state.
              footer:
                Change-type: Patch
                change-type: Patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.67.1
          date: 2021-01-13T14:55:01.572Z
        - commits:
            - subject: Update balena-supervisor from v12.2.11 to v12.3.0
              hash: fc41d16085b331d032a3666fc25af7c43eee5369
              body: ''
              footer:
                Changelog-entry: Update balena-supervisor from v12.2.11 to v12.3.0
                changelog-entry: Update balena-supervisor from v12.2.11 to v12.3.0
                Change-type: minor
                change-type: minor
                Signed-off-by: Felipe Lalanne <felipe@balena.io>
                signed-off-by: Felipe Lalanne <felipe@balena.io>
              author: Felipe Lalanne
              nested: []
          version: meta-balena-2.67.0
          date: 2021-01-12T13:41:49.881Z
        - commits:
            - subject: Respect custom CA in supervisor
              hash: 4cf82392c78d804a18737de80dcfa6f8f34d0494
              body: >
                This is necessary because node has its own built-in CA bundle
                and ignores

                the system-wide bundle. Bind-mount the system-wide bundle to the
                supervisor

                container as well to keep the previous behavior. Make it
                read-only though,

                any modifications should be performed by the host OS.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Respect custom CA in supervisor
                changelog-entry: Respect custom CA in supervisor
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.66.3
          date: 2021-01-12T09:38:46.408Z
        - commits:
            - subject: 'README: Rename resin-logo to balena-logo.'
              hash: 47a7a0ab9a99ea45b4fcf4e684d973088328eca9
              body: >
                The file rename happened in v2.51 but the README has not been
                updated

                accordingly.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.66.2
          date: 2021-01-11T17:30:40.806Z
        - commits:
            - subject: 'kernel-devsrc: use upstream recipe starting with dunfell'
              hash: 1300a223f5b58dd4584b62e87df41ec72f783961
              body: |
                Remove the kernel-devsrc package from meta-balena and
                use the one from the upstream Poky project instead.

                Initially I hoped thud and warrior could also use the respective
                upstreams but I see several differences between the meta-balena
                version and the upstreams so I updated those compat layers
                as well.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'gen_mod_headers: add missing arch headers to tools'
              hash: 5485f1fbc901a04eedbcc3b72cc95fdfb2d03665
              body: >
                Upstream changes to the kernel have switched to a shared x86

                insn decoder required by tools/objtool so we must add those

                include and lib components to our target dir.


                https://lore.kernel.org/lkml/20190830201021.utzjr6cs5hoxygyi@treble/T/
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.66.1
          date: 2021-01-04T13:06:56.017Z
        - commits:
            - subject: 'chrony: bump to version 4.0'
              hash: 67e8632a8a6c82dcf382b0204af40b79dd1a279a
              body: |
                Update chrony from version 3.4 to version 4.0.

                The new version has enhancements and new features that will
                help to improve time synchronisation, including:

                - the ability to add server pools via scripts using chronyc.
                - support for dynamic NTP source files that can be reloaded
                  as necessary (useful for DHCP and config.json sources).
                - source name options for improved handling of pool addresses.
                - repeat 'iburst' when a source is changed from offline to
                  online state.
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: 'chrony: bump to version 4.0'
                changelog-entry: 'chrony: bump to version 4.0'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.66.0
          date: 2020-12-18T11:02:16.858Z
        - commits:
            - subject: 'u-boot: Add required configuration for BalenaOS environment'
              hash: 401345c86a3a017dc548a94c7afa3977d547fc21
              body: >
                The BalenaOS u-boot environment patch requires u-boot to support
                importing

                and exporting of the environment as well as the fsuuid command.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.65.1
          date: 2020-12-17T10:39:35.947Z
  version: 2.74.0+rev1
  date: 2021-05-13T15:16:26.240Z
- commits:
    - subject: Update to Dunfell
      hash: 18fae4a347e78f85c0b1d3292e7ae1d23411063b
      body: ''
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
        Changelog-entry: Update to Dunfell
        changelog-entry: Update to Dunfell
      author: Joseph Kogut
      nested: []
    - subject: Add versionist support
      hash: 05a639ff9a512b2ded5eabbf6be4757c760f7477
      body: |
        Also adds package.json to include the dependencies required in
        versionist.conf.js
      footer:
        Changelog-entry: Add versionist support
        changelog-entry: Add versionist support
        Signed-off-by: Giovanni Garufi <giovanni@resin.io>
        signed-off-by: Giovanni Garufi <giovanni@resin.io>
      author: Giovanni Garufi
      nested: []
  version: 2.65.0+rev1
  date: 2021-02-23T19:59:59.711Z
